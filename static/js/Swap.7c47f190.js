(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Swap"],{"12fd":function(t,e,n){},"35e3":function(t,e,n){"use strict";n.r(e);n("ac1f"),n("1276"),n("fb6a");var i=n("7a23"),o=n("e524"),a=n.n(o),s=n("965b"),l=n.n(s),c=function(t){return Object(i["J"])("data-v-a1c181ce"),t=t(),Object(i["H"])(),t},r={class:"top"},u=["src"],d=c((function(){return Object(i["k"])("svg",{class:"icon-svg","aria-hidden":"true"},[Object(i["k"])("use",{"xlink:href":"#icon-qianbao1"})],-1)})),b=c((function(){return Object(i["k"])("span",{style:{flex:"1"}},null,-1)})),v=c((function(){return Object(i["k"])("use",{"xlink:href":"#icon-slippage"},null,-1)})),m=[v],p=["xlink:href"],h={class:"swap-content"},f={class:"swap-content_left",ref:"swapLeft"},k={class:"section-1"},j={key:2,class:"section-1"},O={key:3,class:"section-1"},g={key:0},T={key:0,style:{"font-size":"0.24rem"}},w={key:0,style:{"font-size":"0.24rem",color:"#f8be46",margin:"0.1rem 0"}},y={key:1,style:{"font-size":"0.24rem",color:"#F81111",margin:"0.1rem 0"}},x=c((function(){return Object(i["k"])("div",{class:"swap-content_center"},null,-1)})),$={class:"token-info"},_={class:"icon-token-container"},S=["src"],A={class:"right-section-1"},I=Object(i["m"])("+"),C={class:"right-section-2"},P={class:"swap-label"},N={class:"swap-label_item-left"},U={class:"swap-label_item-left"},G={class:"swap-label_item-left"},L={key:0},V={class:"swap-label_item-left"},B={key:1},E={class:"swap-label_item-left"},R={class:"swap-label_item-left"},M={class:"path-list"},z={key:0},F={key:1,class:"path-amm"},D=c((function(){return Object(i["k"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},null,-1)})),H={class:"section-bottom"},Q={class:"title"},q=c((function(){return Object(i["k"])("span",{style:{flex:"1"}},null,-1)})),Z={style:{"background-color":"#fff"}},W=c((function(){return Object(i["k"])("img",{src:l.a,alt:"",srcset:""},null,-1)})),J={class:"swap-submitted-container"},Y={class:"icon-success-box"},X={class:"text-1"},K={class:"text-2"};function tt(t,e,o,a,s,l){var c,v,tt,et,nt,it,ot,at,st,lt,ct,rt,ut,dt,bt,vt,mt,pt,ht,ft,kt,jt,Ot,gt,Tt,wt,yt,xt,$t,_t,St,At,It,Ct,Pt,Nt,Ut,Gt,Lt,Vt,Bt,Et,Rt,Mt,zt,Ft,Dt,Ht=Object(i["O"])("RTabs"),Qt=Object(i["O"])("SwapSelectToken"),qt=Object(i["O"])("van-field"),Zt=Object(i["O"])("PercentStep"),Wt=Object(i["O"])("van-loading"),Jt=Object(i["O"])("van-button"),Yt=Object(i["O"])("van-form"),Xt=Object(i["O"])("van-image"),Kt=Object(i["O"])("PriceChart"),te=Object(i["O"])("van-icon"),ee=Object(i["O"])("van-tab"),ne=Object(i["O"])("van-tabs"),ie=Object(i["O"])("van-checkbox"),oe=Object(i["O"])("TxItem"),ae=Object(i["O"])("DynamicScrollerItem"),se=Object(i["O"])("DynamicScroller"),le=Object(i["O"])("van-empty"),ce=Object(i["O"])("ChangeLang"),re=Object(i["O"])("Slippage"),ue=Object(i["O"])("confirm-swap"),de=Object(i["O"])("van-popup");return Object(i["G"])(),Object(i["j"])(i["a"],null,[Object(i["k"])("section",{class:"swap-container",style:Object(i["y"])({"--upColor":t.$store.getters.upColor[3],"--downColor":t.$store.getters.downColor[3]})},[Object(i["k"])("div",r,[""!==t.$store.state.wallet&&"importAddress"!==t.$store.state.wallet&&l.netId?(Object(i["G"])(),Object(i["j"])("div",{key:0,class:"left",onClick:e[0]||(e[0]=Object(i["cb"])((function(){return l.handleWalletAddress&&l.handleWalletAddress.apply(l,arguments)}),["stop"]))},[l.netId?(Object(i["G"])(),Object(i["j"])("img",{key:0,class:"icon-svg icon-net-connect",src:"https://avesp.xyz/oss/chain/".concat(l.netId,".png"),alt:"",srcset:""},null,8,u)):Object(i["i"])("",!0),Object(i["k"])("span",null,Object(i["T"])(l.currentAccountSplit),1)])):(Object(i["G"])(),Object(i["j"])("div",{key:1,class:"left",onClick:e[1]||(e[1]=Object(i["cb"])((function(){return l.handleWalletAddress&&l.handleWalletAddress.apply(l,arguments)}),["stop"]))},[d,Object(i["k"])("span",null,Object(i["T"])(t.$t("connectWallet")),1)])),b,(Object(i["G"])(),Object(i["j"])("svg",{class:"icon-svg icon-slippage","aria-hidden":"true",onClick:e[2]||(e[2]=Object(i["cb"])((function(t){return s.slippageVisible=!0}),["stop"]))},m)),(Object(i["G"])(),Object(i["j"])("svg",{class:"icon-svg icon-lang","aria-hidden":"true",onClick:e[3]||(e[3]=Object(i["cb"])((function(e){return t.$store.state.changeLangVisible=!0}),["stop"]))},[Object(i["k"])("use",{"xlink:href":"#icon-".concat(t.$store.getters.language,"-o")},null,8,p)]))]),Object(i["k"])("div",h,[Object(i["k"])("div",f,[Object(i["n"])(Ht,{active:s.tabActive,"onUpdate:active":e[4]||(e[4]=function(t){return s.tabActive=t}),tabs:l.tabs,activeBgColor:"buy"===s.tabActive?t.$store.getters.upColor[3]:t.$store.getters.downColor[3]},null,8,["active","tabs","activeBgColor"]),Object(i["n"])(Yt,{class:"swap-form",onSubmit:l.onSubmit,style:{"--van-cell-horizontal-padding":"0","--van-cell-vertical-padding":"0"}},{default:Object(i["Z"])((function(){var n,o,a,c,r,u,d,b,v,m,p,h,f,w,y,x,$,_,S,A,I,C,P,N,U,G,L;return[null===(n=s.baseToken)||void 0===n||null===(o=n.token)||void 0===o||!o.token||"buy"!==s.tabActive&&0!==(null===(a=l.userTokens)||void 0===a?void 0:a.length)?Object(i["i"])("",!0):(Object(i["G"])(),Object(i["h"])(Qt,{key:0,tokens:s.tokens,initToken:null===(c=s.baseToken)||void 0===c?void 0:c.token,chain:t.$store.getters.netId||(null===(r=t.$route.params)||void 0===r||null===(u=r.id)||void 0===u||null===(d=u.split)||void 0===d||null===(b=d.call(u,"-"))||void 0===b?void 0:b[1])||"",hasNative:!0,onOnSelect:l.handleSelectBaseToken},null,8,["tokens","initToken","chain","onOnSelect"])),null!==(v=s.baseToken)&&void 0!==v&&null!==(m=v.token)&&void 0!==m&&m.token&&"sell"===s.tabActive&&(null===(p=l.userTokens)||void 0===p?void 0:p.length)>0?(Object(i["G"])(),Object(i["h"])(Qt,{key:1,tokens:l.userTokens,initToken:null===(h=s.baseToken)||void 0===h?void 0:h.token,chain:t.$store.getters.netId||(null===(f=t.$route.params)||void 0===f||null===(w=f.id)||void 0===w||null===(y=w.split)||void 0===y||null===(x=y.call(w,"-"))||void 0===x?void 0:x[1])||"",hasNative:!0,onOnSelect:l.handleSelectBaseToken,isBalance:""},null,8,["tokens","initToken","chain","onOnSelect"])):Object(i["i"])("",!0),Object(i["n"])(qt,{name:"amount",modelValue:s.amount,"onUpdate:modelValue":e[6]||(e[6]=function(t){return s.amount=t}),label:"",border:!1,style:{"margin-top":"0.2rem"},rules:[{required:!0,message:t.$t("plsEnterAmount")},{validator:l.checkAmount,message:l.checkAmountMessage}]},{input:Object(i["Z"])((function(){return[Object(i["n"])(qt,{modelValue:s.amount,"onUpdate:modelValue":e[5]||(e[5]=function(t){return s.amount=t}),class:"outAmount-input",name:"amount",type:"number",border:!1,"input-align":"center",placeholder:t.$t("amount"),clearable:""},null,8,["modelValue","placeholder"])]})),_:1},8,["modelValue","rules"]),Object(i["n"])(Zt,{ref:"percentStep",onChange:l.handlePercentChange,activeColor:"buy"===s.tabActive?t.$store.getters.upColor[3]:t.$store.getters.downColor[3]},null,8,["onChange","activeColor"]),Object(i["n"])(qt,{class:"outAmount-input",modelValue:s.outAmount,"onUpdate:modelValue":e[7]||(e[7]=function(t){return s.outAmount=t}),type:"number",placeholder:"buy"===s.tabActive?t.$t("buyValue"):t.$t("sellValue"),border:!1},{"right-icon":Object(i["Z"])((function(){return[s.quoteLoading?(Object(i["G"])(),Object(i["h"])(Wt,{key:0,size:"0.32rem"})):Object(i["i"])("",!0)]})),extra:Object(i["Z"])((function(){var e,n,o,a,c,r,u,d,b,v,m,p,h,f;return[null!==(e=s.activeToken)&&void 0!==e&&e.address&&null!==(n=s.activeToken)&&void 0!==n&&n.symbol&&"buy"===s.tabActive&&(null===(o=l.userTokens)||void 0===o?void 0:o.length)>0?(Object(i["G"])(),Object(i["h"])(Qt,{key:0,class:"select-token-btn",isBalance:"",tokens:l.userTokens,initToken:s.activeToken,chain:t.$store.getters.netId||(null===(a=t.$route.params)||void 0===a||null===(c=a.id)||void 0===c||null===(r=c.split)||void 0===r||null===(u=r.call(c,"-"))||void 0===u?void 0:u[1])||"",onOnSelect:l.handleSelectToken},null,8,["tokens","initToken","chain","onOnSelect"])):Object(i["i"])("",!0),null!==(d=s.activeToken)&&void 0!==d&&d.address&&null!==(b=s.activeToken)&&void 0!==b&&b.symbol&&("sell"===s.tabActive||0===(null===(v=l.userTokens)||void 0===v?void 0:v.length))?(Object(i["G"])(),Object(i["h"])(Qt,{key:1,class:"select-token-btn",tokens:s.tokens,initToken:s.activeToken,chain:t.$store.getters.netId||(null===(m=t.$route.params)||void 0===m||null===(p=m.id)||void 0===p||null===(h=p.split)||void 0===h||null===(f=h.call(p,"-"))||void 0===f?void 0:f[1])||"",onOnSelect:l.handleSelectToken},null,8,["tokens","initToken","chain","onOnSelect"])):Object(i["i"])("",!0)]})),_:1},8,["modelValue","placeholder"]),Object(i["k"])("div",k,[Object(i["k"])("span",null,Object(i["T"])(t.$t("available")),1),Object(i["k"])("div",null,[Object(i["k"])("span",null,Object(i["T"])(t.$f.formatNumber2((null===($=s.activeToken)||void 0===$?void 0:$.balance)||0))+" "+Object(i["T"])((null===(_=s.activeToken)||void 0===_?void 0:_.symbol)||""),1),"buy"===s.tabActive?(Object(i["G"])(),Object(i["j"])("button",{key:0,type:"button",class:"max-btn",onClick:e[8]||(e[8]=Object(i["cb"])((function(){return l.handleOutAmountMax&&l.handleOutAmountMax.apply(l,arguments)}),["stop"]))},Object(i["T"])(t.$t("max")),1)):Object(i["i"])("",!0)])]),"buy"===s.tabActive?(Object(i["G"])(),Object(i["j"])("div",j,[Object(i["k"])("span",null,Object(i["T"])(t.$t("availableBuy")),1),Object(i["k"])("span",null,Object(i["T"])(t.$f.formatNumber2(s.maxOutAmount))+" "+Object(i["T"])((null===(S=s.baseToken)||void 0===S||null===(A=S.token)||void 0===A?void 0:A.symbol)||(null===(I=s.baseTokenChain)||void 0===I?void 0:I.symbol)||""),1)])):"sell"===s.tabActive?(Object(i["G"])(),Object(i["j"])("div",O,[Object(i["k"])("span",null,Object(i["T"])(t.$t("availableSell")),1),Object(i["k"])("span",null,Object(i["T"])(t.$f.formatNumber2(null===(C=s.baseTokenChain)||void 0===C?void 0:C.balance))+" "+Object(i["T"])((null===(P=s.baseToken)||void 0===P||null===(N=P.token)||void 0===N?void 0:N.symbol)||(null===(U=s.baseTokenChain)||void 0===U?void 0:U.symbol)||""),1)])):Object(i["i"])("",!0),l.isApprove?(Object(i["G"])(),Object(i["h"])(Jt,{key:5,class:"submit-btn",block:"",loading:s.loadingSwap||s.quoteLoading,"loading-text":l.loadingSwapTxt,color:l.swapButtonColor,disabled:null===(G=l.priceImpactV)||void 0===G||null===(L=G.gt)||void 0===L?void 0:L.call(G,.4),"native-type":"submit"},{default:Object(i["Z"])((function(){var e,n,o,a;return[null!==(e=l.priceImpactV)&&void 0!==e&&null!==(n=e.gt)&&void 0!==n&&n.call(e,.4)?(Object(i["G"])(),Object(i["j"])("span",g,Object(i["T"])(t.$t("priceImpactTooHigh")),1)):(Object(i["G"])(),Object(i["j"])(i["a"],{key:1},[Object(i["k"])("span",null,Object(i["T"])(null!==(o=l.priceImpactV)&&void 0!==o&&null!==(a=o.gt)&&void 0!==a&&a.call(o,.1)?t.$t("".concat(s.tabActive,"Anyway")):t.$t(s.tabActive)),1),l.taxStr?(Object(i["G"])(),Object(i["j"])("span",T,Object(i["T"])(l.taxStr),1)):Object(i["i"])("",!0)],64))]})),_:1},8,["loading","loading-text","color","disabled"])):(Object(i["G"])(),Object(i["h"])(Jt,{key:4,class:"submit-btn",block:"",color:"#558BED","native-type":"submit",loading:s.loadingApprove},{default:Object(i["Z"])((function(){return[Object(i["m"])(Object(i["T"])(t.$t("approve")),1)]})),_:1},8,["loading"]))]})),_:1},8,["onSubmit"]),s.isTaxHigh?(Object(i["G"])(),Object(i["j"])("div",w,Object(i["T"])(t.$t("taxTooHigh")),1)):Object(i["i"])("",!0),s.isCannotSellAll?(Object(i["G"])(),Object(i["j"])("div",y,Object(i["T"])(t.$t("cannotSellAll")),1)):Object(i["i"])("",!0)],512),x,Object(i["k"])("div",{class:"swap-content_right",style:Object(i["y"])({"max-height":s.height/50+"rem"})},[Object(i["k"])("div",$,[Object(i["k"])("div",_,[Object(i["n"])(Xt,{round:"",width:"0.36rem",height:"0.36rem","icon-size":"0.36rem","lazy-load":"","show-loading":"",src:t.$f.formatIcon(t.$route.params.id),"error-icon":n("aecc")},null,8,["src","error-icon"]),null!==(c=s.baseToken)&&void 0!==c&&null!==(v=c.token)&&void 0!==v&&v.chain?(Object(i["G"])(),Object(i["j"])("img",{key:0,class:"icon-svg icon-network",style:{"font-size":"0.24rem"},src:"https://avesp.xyz/oss/chain/".concat(null===(tt=s.baseToken)||void 0===tt||null===(et=tt.token)||void 0===et?void 0:et.chain,".png"),alt:"",srcset:""},null,8,S)):Object(i["i"])("",!0)]),Object(i["k"])("span",null,Object(i["T"])((null===(nt=s.baseToken)||void 0===nt||null===(it=nt.token)||void 0===it?void 0:it.symbol)||(null===(ot=s.baseTokenChain)||void 0===ot?void 0:ot.symbol)||""),1)]),Object(i["k"])("div",A,[Object(i["k"])("div",null," $"+Object(i["T"])(t.$f.formatNumber2((null===(at=s.baseToken)||void 0===at||null===(st=at.token)||void 0===st?void 0:st.current_price_usd)||0)),1),Object(i["k"])("div",{style:Object(i["y"])({color:(null===(lt=s.baseToken)||void 0===lt||null===(ct=lt.token)||void 0===ct?void 0:ct.price_change)<0?"var(--downColor)":"var(--upColor)"})},[(null===(rt=s.baseToken)||void 0===rt||null===(ut=rt.token)||void 0===ut?void 0:ut.price_change)>0?(Object(i["G"])(),Object(i["j"])(i["a"],{key:0},[I],64)):Object(i["i"])("",!0),Object(i["m"])(Object(i["T"])((null===(dt=s.baseToken)||void 0===dt||null===(bt=dt.token)||void 0===bt?void 0:bt.price_change)||0)+"% ",1)],4)]),Object(i["n"])(Kt,{dataX:s.dataX,dataY:s.dataY},null,8,["dataX","dataY"]),Object(i["k"])("table",C,[Object(i["k"])("tr",null,[Object(i["k"])("th",null,Object(i["T"])(t.$t("pool1")),1),Object(i["k"])("th",null,Object(i["T"])(t.$t("amount")),1)]),(Object(i["G"])(!0),Object(i["j"])(i["a"],null,Object(i["M"])(null===(vt=s.baseToken)||void 0===vt||null===(mt=vt.pairs)||void 0===mt?void 0:mt.slice(0,3),(function(e,n){return Object(i["G"])(),Object(i["j"])("tr",{key:n},[Object(i["k"])("td",null,[Object(i["k"])("div",null,Object(i["T"])(e.target_token===e.token0_address?e.token0_symbol:e.token1_symbol),1),Object(i["k"])("div",null,Object(i["T"])(e.target_token===e.token0_address?e.token1_symbol:e.token0_symbol),1)]),Object(i["k"])("td",null,[Object(i["k"])("div",null,Object(i["T"])(t.$f.formatNumber2(e.target_token===e.token0_address?e.reserve0:e.reserve1)),1),Object(i["k"])("div",null,Object(i["T"])(t.$f.formatNumber2(e.target_token===e.token0_address?e.reserve1:e.reserve0)),1)])])})),128)),(null===(pt=s.baseToken)||void 0===pt||null===(ht=pt.pairs)||void 0===ht?void 0:ht.length)>3&&s.isPairShowMore?(Object(i["G"])(!0),Object(i["j"])(i["a"],{key:0},Object(i["M"])(null===(ft=s.baseToken)||void 0===ft||null===(kt=ft.pairs)||void 0===kt?void 0:kt.slice(3),(function(e,n){return Object(i["G"])(),Object(i["j"])("tr",{key:n},[Object(i["k"])("td",null,[Object(i["k"])("div",null,Object(i["T"])(e.target_token===e.token0_address?e.token0_symbol:e.token1_symbol),1),Object(i["k"])("div",null,Object(i["T"])(e.target_token===e.token0_address?e.token1_symbol:e.token0_symbol),1)]),Object(i["k"])("td",null,[Object(i["k"])("div",null,Object(i["T"])(t.$f.formatNumber2(e.target_token===e.token0_address?e.reserve0:e.reserve1)),1),Object(i["k"])("div",null,Object(i["T"])(t.$f.formatNumber2(e.target_token===e.token0_address?e.reserve1:e.reserve0)),1)])])})),128)):Object(i["i"])("",!0)]),Object(i["ab"])(Object(i["k"])("div",{class:"btn-more",onClick:e[9]||(e[9]=Object(i["cb"])((function(t){return s.isPairShowMore=!0}),["stop"]))},[Object(i["k"])("span",null,Object(i["T"])(t.$t("viewMore")),1),Object(i["n"])(te,{name:"arrow-down"})],512),[[i["W"],!s.isPairShowMore&&(null===(jt=s.baseToken)||void 0===jt||null===(Ot=jt.pairs)||void 0===Ot?void 0:Ot.length)>3]]),Object(i["ab"])(Object(i["k"])("div",{class:"btn-more",onClick:e[10]||(e[10]=Object(i["cb"])((function(t){return s.isPairShowMore=!1}),["stop"]))},[Object(i["k"])("span",null,Object(i["T"])(t.$t("putAway")),1),Object(i["n"])(te,{name:"arrow-up"})],512),[[i["W"],s.isPairShowMore&&(null===(gt=s.baseToken)||void 0===gt||null===(Tt=gt.pairs)||void 0===Tt?void 0:Tt.length)>3]])],4)]),Object(i["k"])("ul",P,[Object(i["k"])("li",null,[Object(i["k"])("div",N,[Object(i["k"])("span",null,Object(i["T"])(t.$t("slippage")),1),Object(i["k"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:e[11]||(e[11]=Object(i["cb"])((function(e){return l.alertTips(t.$t("slippage"),t.$t("minimumReceivedTips"))}),["stop"]))})]),Object(i["k"])("div",null,Object(i["T"])(s.slippage)+"%",1)]),Object(i["k"])("li",null,[Object(i["k"])("div",U,[Object(i["k"])("span",null,Object(i["T"])(t.$t("minimumReceived")),1),Object(i["k"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:e[12]||(e[12]=Object(i["cb"])((function(e){return l.alertTips(t.$t("minimumReceived"),t.$t("slippageTips"))}),["stop"]))})]),Object(i["k"])("div",null,Object(i["T"])(t.$f.formatNumber2(l.minReceived))+" "+Object(i["T"])(l.toToken.symbol),1)]),Object(i["k"])("li",null,[Object(i["k"])("div",G,[Object(i["k"])("span",null,Object(i["T"])(t.$t("priceImpact")),1),Object(i["k"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:e[13]||(e[13]=Object(i["cb"])((function(e){return l.alertTips(t.$t("priceImpact"),t.$t("priceImpactTips"))}),["stop"]))})]),Object(i["k"])("div",{style:Object(i["y"])({color:l.priceImpactColor})},Object(i["T"])(l.priceImpact)+Object(i["T"])(null!==(wt=l.priceImpactV)&&void 0!==wt&&null!==(yt=wt.gt)&&void 0!==yt&&yt.call(wt,.05)?"(".concat(t.$t("excessivePriceImpact"),")"):""),5)]),"buy"===s.tabActive&&s.isTax?(Object(i["G"])(),Object(i["j"])("li",L,[Object(i["k"])("div",V,[Object(i["k"])("span",null,Object(i["T"])(t.$t("estimatedAveragePrice")),1),Object(i["k"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:e[14]||(e[14]=Object(i["cb"])((function(e){return l.alertTips(t.$t("estimatedAveragePrice"),t.$t("estimatedAveragePriceTips"))}),["stop"]))})]),Object(i["k"])("div",null," 1 "+Object(i["T"])((null===(xt=s.swapQuoteInfo)||void 0===xt||null===($t=xt.toToken)||void 0===$t?void 0:$t.symbol)||(null===(_t=s.baseToken)||void 0===_t||null===(St=_t.token)||void 0===St?void 0:St.symbol)||"")+" = "+Object(i["T"])(t.$f.formatNumber2(s.baseTokenPrice))+" "+Object(i["T"])((null===(At=s.swapQuoteInfo)||void 0===At||null===(It=At.fromToken)||void 0===It?void 0:It.symbol)||(null===(Ct=s.activeToken)||void 0===Ct?void 0:Ct.symbol)||""),1)])):"sell"===s.tabActive&&(null===(Pt=s.baseTokenExtra)||void 0===Pt?void 0:Pt.sell_tax)>0?(Object(i["G"])(),Object(i["j"])("li",B,[Object(i["k"])("div",E,[Object(i["k"])("span",null,Object(i["T"])(t.$t("estimatedAveragePrice")),1),Object(i["k"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:e[15]||(e[15]=Object(i["cb"])((function(e){return l.alertTips(t.$t("estimatedAveragePrice"),t.$t("estimatedAveragePriceTips"))}),["stop"]))})]),Object(i["k"])("div",null," 1 "+Object(i["T"])((null===(Nt=s.swapQuoteInfo)||void 0===Nt||null===(Ut=Nt.fromToken)||void 0===Ut?void 0:Ut.symbol)||(null===(Gt=s.baseToken)||void 0===Gt||null===(Lt=Gt.token)||void 0===Lt?void 0:Lt.symbol)||"")+" = "+Object(i["T"])(t.$f.formatNumber2(s.baseTokenPrice))+" "+Object(i["T"])((null===(Vt=s.swapQuoteInfo)||void 0===Vt||null===(Bt=Vt.toToken)||void 0===Bt?void 0:Bt.symbol)||(null===(Et=s.activeToken)||void 0===Et?void 0:Et.symbol)||""),1)])):Object(i["i"])("",!0),Object(i["k"])("li",null,[Object(i["k"])("div",R,[Object(i["k"])("span",null,Object(i["T"])(t.$t("tokenRoute")),1),Object(i["k"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:e[16]||(e[16]=Object(i["cb"])((function(e){return l.alertTips(t.$t("tokenRoute"),t.$t("tokenRouteTips"))}),["stop"]))})]),Object(i["k"])("div",M,[(Object(i["G"])(!0),Object(i["j"])(i["a"],null,Object(i["M"])(s.swapRouterPath,(function(t,e){return Object(i["G"])(),Object(i["j"])(i["a"],{key:e},[t.symbol?(Object(i["G"])(),Object(i["j"])("span",z,Object(i["T"])(t.symbol),1)):Object(i["i"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(i["G"])(),Object(i["j"])("div",F,[Object(i["n"])(Xt,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"https://ave.s3.ap-east-1.amazonaws.com/swap/".concat(t.nextAmm,".jpeg"),"error-icon":n("aecc")},null,8,["src","error-icon"]),D])):Object(i["i"])("",!0)],64)})),128))])])]),Object(i["k"])("div",H,[Object(i["k"])("div",Q,[Object(i["n"])(ne,{active:s.tabActive1,"onUpdate:active":e[17]||(e[17]=function(t){return s.tabActive1=t}),shrink:"",color:"#558BED",style:{"--van-tabs-nav-background-color":"#fff"}},{default:Object(i["Z"])((function(){return[Object(i["n"])(ee,{name:"swap",title:t.$t("TransactionHistory")},null,8,["title"])]})),_:1},8,["active"]),q,Object(i["n"])(ie,{modelValue:s.isCurrentToken,"onUpdate:modelValue":e[18]||(e[18]=function(t){return s.isCurrentToken=t}),"icon-size":"0.32rem"},{default:Object(i["Z"])((function(){return[Object(i["m"])(Object(i["T"])(t.$t("currentToken")),1)]})),_:1},8,["modelValue"]),Object(i["k"])("i",{class:"iconfont icon-history",onClick:e[19]||(e[19]=Object(i["cb"])((function(){return l.goHistory&&l.goHistory.apply(l,arguments)}),["stop"]))})]),Object(i["k"])("ul",Z,[(null===(Rt=l.txs)||void 0===Rt?void 0:Rt.length)>0?(Object(i["G"])(),Object(i["h"])(se,{key:0,items:l.txs,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(i["Z"])((function(t){var e=t.item,n=t.index,o=t.active;return[Object(i["n"])(ae,{item:e,active:o,"data-index":n},{default:Object(i["Z"])((function(){return[Object(i["n"])(oe,{item:e},null,8,["item"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])):Object(i["i"])("",!0),Object(i["ab"])(Object(i["n"])(le,{class:"empty",image:t.emptyNoDataLight,description:t.$t("empty")},null,8,["image","description"]),[[i["W"],l.txs&&0===l.txs.length]])])]),Object(i["k"])("div",{class:"section-audit",onClick:e[20]||(e[20]=Object(i["cb"])((function(){return l.goAudit&&l.goAudit.apply(l,arguments)}),["stop"]))},[Object(i["k"])("span",null,Object(i["T"])(t.$t("securityAudit"))+": ",1),W])],4),Object(i["n"])(ce),s.slippageVisible?(Object(i["G"])(),Object(i["h"])(re,{key:0,visible:s.slippageVisible,"onUpdate:visible":e[21]||(e[21]=function(t){return s.slippageVisible=t}),initSlippage:s.slippage,onOnSubmit:l.submitSlippage},null,8,["visible","initSlippage","onOnSubmit"])):Object(i["i"])("",!0),Object(i["n"])(ue,{visible:s.dialogVisibleSwap,"onUpdate:visible":e[22]||(e[22]=function(t){return s.dialogVisibleSwap=t}),swapInfo:s.swapInfo,slippage:s.slippage,onSubmit:l.submitSwap,loading:s.loadingConfirmSwap,chain:t.$store.getters.netId||(null===(Mt=t.$route.params)||void 0===Mt||null===(zt=Mt.id)||void 0===zt||null===(Ft=zt.split)||void 0===Ft||null===(Dt=Ft.call(zt,"-"))||void 0===Dt?void 0:Dt[1])||"",nativePrice:s.nativePrice,gasPrice:s.gasPrice},null,8,["visible","swapInfo","slippage","onSubmit","loading","chain","nativePrice","gasPrice"]),Object(i["n"])(de,{show:s.dialogSwapSubmittedVisible,"onUpdate:show":e[25]||(e[25]=function(t){return s.dialogSwapSubmittedVisible=t}),style:Object(i["y"])({width:"90%",padding:"0.4rem"}),closeable:!1,round:"",teleport:"#app"},{default:Object(i["Z"])((function(){return[Object(i["k"])("div",J,[Object(i["k"])("div",Y,[Object(i["n"])(te,{class:"icon-success",name:"success"})]),Object(i["k"])("div",X,Object(i["T"])(t.$t("transactionsSubmitted")),1),Object(i["k"])("div",K,Object(i["T"])(t.$t("blockchainToViewDetails")),1),Object(i["n"])(Jt,{class:"submit-button",type:"primary",block:"",round:"",onClick:e[23]||(e[23]=Object(i["cb"])((function(e){var n,i,o,a;return t.$f.openBrowser(t.$f.formatExplorerUrl(t.$store.getters.netId||(null===(n=t.$route.params)||void 0===n||null===(i=n.id)||void 0===i||null===(o=i.split)||void 0===o||null===(a=o.call(i,"-"))||void 0===a?void 0:a[1])||"",s.swapInfo.transaction,"tx"))}),["stop"]))},{default:Object(i["Z"])((function(){return[Object(i["m"])(Object(i["T"])(t.$t("viewDetails")),1)]})),_:1}),Object(i["n"])(Jt,{class:"btn-close",type:"default",block:"",round:"",onClick:e[24]||(e[24]=Object(i["cb"])((function(t){return s.dialogSwapSubmittedVisible=!1}),["stop"]))},{default:Object(i["Z"])((function(){return[Object(i["m"])(Object(i["T"])(t.$t("close")),1)]})),_:1})])]})),_:1},8,["show","style"])],64)}var et=n("2909"),nt=n("1da1"),it=n("5530"),ot=n("3835");n("96cf"),n("5319"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("4de4"),n("d3b7"),n("00b4"),n("b0c0"),n("b680"),n("99af"),n("a9e3"),n("d81d"),n("4e82"),n("7db0"),n("e9c4"),n("3ca3"),n("ddb0"),n("466d"),n("159b"),n("caad");function at(t,e,n,o,a,s){var l=Object(i["O"])("van-action-sheet");return Object(i["G"])(),Object(i["h"])(l,{class:"language-popup",show:t.$store.state.changeLangVisible,"onUpdate:show":e[0]||(e[0]=function(e){return t.$store.state.changeLangVisible=e}),actions:s.actions,"cancel-text":t.$t("cancel"),description:t.$t("switchLang"),teleport:"#app",onSelect:s.onSelect,"close-on-click-action":""},null,8,["show","actions","cancel-text","description","onSelect"])}var st={name:"ChangeLang",data:function(){return{show:!1}},computed:{language:function(){return this.$store.getters.language},actions:function(){return[{name:this.$t("common.zh-cn"),value:"zh-cn",color:"zh-cn"===this.language?"#558BED":"#323233"},{name:this.$t("common.en"),value:"en",color:"en"===this.language?"#558BED":"#323233"},{name:this.$t("common.zh-tw"),value:"zh-tw",color:"zh-tw"===this.language?"#558BED":"#323233"}]}},methods:{onSelect:function(t){this.$store.commit("setLanguage",t.value)}}},lt=(n("d398"),n("6b0d")),ct=n.n(lt);const rt=ct()(st,[["render",at],["__scopeId","data-v-2eef8200"]]);var ut=rt,dt=function(t){return Object(i["J"])("data-v-2644cf5a"),t=t(),Object(i["H"])(),t},bt={class:"popup-title"},vt={class:"slippage-label"},mt={style:{width:"100%"}},pt={class:"radio-group"},ht={key:0,style:{flex:"1"}},ft=["id","value"],kt=["for"],jt={class:"slippage-input"},Ot=dt((function(){return Object(i["k"])("span",null,"%",-1)})),gt={class:"form-submit"};function Tt(t,e,n,o,a,s){var l=this,c=Object(i["O"])("van-field"),r=Object(i["O"])("van-button"),u=Object(i["O"])("van-form"),d=Object(i["O"])("van-popup");return Object(i["G"])(),Object(i["h"])(d,{show:s.dialogVisible,"onUpdate:show":e[4]||(e[4]=function(t){return s.dialogVisible=t}),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(i["Z"])((function(){return[Object(i["k"])("h3",bt,Object(i["T"])(t.$t("setSlippage")),1),Object(i["n"])(u,{class:"popup-content",onSubmit:s.confirmSubmit},{default:Object(i["Z"])((function(){return[Object(i["k"])("div",vt,[Object(i["k"])("span",null,Object(i["T"])(t.$t("slippage")),1),Object(i["k"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:e[0]||(e[0]=Object(i["cb"])((function(){return s.openSlippageTips&&s.openSlippageTips.apply(s,arguments)}),["stop"])),style:{"font-size":"0.38rem","margin-left":"0.05rem",color:"#558BED"}})]),Object(i["n"])(c,{name:"slippage",modelValue:a.slippage,"onUpdate:modelValue":e[3]||(e[3]=function(t){return a.slippage=t}),label:"",style:{"--van-cell-horizontal-padding":"0"},rules:[{required:!0,message:l.$t("enterSlippage")},{validator:s.validator,message:l.$t("slippageMaxTip")}],border:!1},{input:Object(i["Z"])((function(){return[Object(i["k"])("div",mt,[Object(i["k"])("div",pt,[(Object(i["G"])(!0),Object(i["j"])(i["a"],null,Object(i["M"])(a.slippageList,(function(t,n){return Object(i["G"])(),Object(i["j"])(i["a"],{key:n},[0!==n?(Object(i["G"])(),Object(i["j"])("span",ht)):Object(i["i"])("",!0),Object(i["ab"])(Object(i["k"])("input",{type:"radio",id:"radio-".concat(t),"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.slippage=t}),value:t,class:"radio-input"},null,8,ft),[[i["V"],a.slippage]]),Object(i["k"])("label",{for:"radio-".concat(t),class:"radio-item"},Object(i["T"])(t)+"%",9,kt)],64)})),128))]),Object(i["k"])("div",jt,[Object(i["n"])(c,{class:"input",name:"slippage",type:"number",min:"0",max:"49.99",modelValue:a.slippage,"onUpdate:modelValue":e[2]||(e[2]=function(t){return a.slippage=t}),onBlur:s.handleBlur,clearable:""},null,8,["modelValue","onBlur"]),Ot])])]})),_:1},8,["modelValue","rules"]),Object(i["k"])("div",gt,[Object(i["n"])(r,{class:"btn",block:"",round:"","native-type":"submit",size:"normal",type:"primary"},{default:Object(i["Z"])((function(){return[Object(i["m"])(Object(i["T"])(t.$t("confirm1")),1)]})),_:1})])]})),_:1},8,["onSubmit"])]})),_:1},8,["show"])}var wt={name:"Slippage",props:{visible:Boolean,initSlippage:String},emits:["update:visible","onSubmit"],data:function(){return{slippageList:["0.1","0.5","1"],slippage:this.initSlippage||"1"}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},methods:{confirmSubmit:function(){this.$emit("onSubmit",this.slippage),console.log("slippage",this.slippage)},openSlippageTips:function(){this.$dialog.alert({title:this.$t("slippage"),message:this.$t("slippageTips"),confirmButtonText:this.$t("iKnown"),confirmButtonColor:"#558BED",messageAlign:"left"}).then((function(){}))},handleBlur:function(){this.slippage&&Number(this.slippage)<0&&(this.slippage=0)},validator:function(t){return Number(t)<=49.99}}};n("f37e");const yt=ct()(wt,[["render",Tt],["__scopeId","data-v-2644cf5a"]]);var xt=yt,$t={key:0,class:"gap"},_t=["id","value"],St=["for"];function At(t,e,n,o,a,s){return Object(i["G"])(),Object(i["j"])("div",{class:"tabs",style:Object(i["y"])({"--tab-active-color":n.activeColor||"#fff","--tab-active-bgColor":n.activeBgColor||"#3F80F7","--tab-gap":n.gap||"0.16rem"})},[(Object(i["G"])(!0),Object(i["j"])(i["a"],null,Object(i["M"])(s.newTabs,(function(t,n){return Object(i["G"])(),Object(i["j"])(i["a"],{key:n},[0!==n?(Object(i["G"])(),Object(i["j"])("span",$t)):Object(i["i"])("",!0),Object(i["ab"])(Object(i["k"])("input",{type:"radio",id:t.id,"onUpdate:modelValue":e[0]||(e[0]=function(t){return s.tabActive=t}),value:t.value||t.name,class:"tab-radio-input"},null,8,_t),[[i["V"],s.tabActive]]),Object(i["k"])("label",{for:t.id,class:"tab-item"},Object(i["T"])(t.name),9,St)],64)})),128))],4)}var It=n("ec26"),Ct={name:"RTabs",props:{tabs:Array,active:String,activeColor:String,activeBgColor:String,gap:String},emits:["update:active"],data:function(){return{}},computed:{tabActive:{get:function(){return this.active},set:function(t){this.$emit("update:active",t)}},newTabs:function(){return this.tabs.map((function(t){return Object(it["a"])(Object(it["a"])({},t),{},{id:"tab-item-"+Object(It["a"])()})}))}},methods:{}};n("e7b0");const Pt=ct()(Ct,[["render",At],["__scopeId","data-v-56f8a46c"]]);var Nt=Pt,Ut=function(t){return Object(i["J"])("data-v-382daa43"),t=t(),Object(i["H"])(),t},Gt={key:0,class:"gap"},Lt=["onClick"],Vt=Ut((function(){return Object(i["k"])("div",{class:"bar"},null,-1)})),Bt={class:"text"};function Et(t,e,n,o,a,s){return Object(i["G"])(),Object(i["j"])("div",{class:"percent-container",style:Object(i["y"])({"--percent-active-color":n.activeColor})},[Object(i["k"])("div",{for:"percent-radio-0",class:Object(i["x"])({active:0===a.activePercent})},null,2),(Object(i["G"])(!0),Object(i["j"])(i["a"],null,Object(i["M"])(a.percentList,(function(t,e){return Object(i["G"])(),Object(i["j"])(i["a"],{key:e},[0!==e?(Object(i["G"])(),Object(i["j"])("div",Gt)):Object(i["i"])("",!0),Object(i["k"])("div",{class:Object(i["x"])(["label",{active:t===a.activePercent}]),onClick:Object(i["cb"])((function(e){return s.handleClick(t)}),["stop"])},[Vt,Object(i["k"])("div",Bt,Object(i["T"])(t)+"%",1)],10,Lt)],64)})),128))],4)}var Rt={name:"PercentStep",props:{activeColor:String},emits:["change"],data:function(){return{activePercent:0,percentList:[25,50,75,100]}},methods:{handleClick:function(t){t===this.activePercent?(this.activePercent=0,this.$emit("change",0)):(this.activePercent=t,this.$emit("change",t))}}};n("9170");const Mt=ct()(Rt,[["render",Et],["__scopeId","data-v-382daa43"]]);var zt=Mt,Ft=n("57c9"),Dt=(n("2532"),function(t){return Object(i["J"])("data-v-3f14acd9"),t=t(),Object(i["H"])(),t}),Ht={class:"select-box"},Qt={class:"token-container"},qt=Dt((function(){return Object(i["k"])("i",{class:"iconfont icon-collapse-down"},null,-1)})),Zt={class:"search-bar",action:"/"},Wt={key:0,class:"pop-title"},Jt={style:{background:"#fff"}},Yt=["onClick"],Xt={class:"main"},Kt={key:0,class:"risk-status high"},te={key:0,class:"minor"},ee=Dt((function(){return Object(i["k"])("span",{style:{flex:"1"}},null,-1)})),ne={class:"right-label"},ie=Dt((function(){return Object(i["k"])("br",null,null,-1)})),oe={key:0,class:"minor"};function ae(t,e,o,a,s,l){var c,r=Object(i["O"])("van-image"),u=Object(i["O"])("van-search"),d=Object(i["O"])("van-empty"),b=Object(i["O"])("van-icon"),v=Object(i["O"])("DynamicScrollerItem"),m=Object(i["O"])("DynamicScroller"),p=Object(i["O"])("van-popup");return Object(i["G"])(),Object(i["j"])("div",Ht,[Object(i["k"])("button",{class:"select-container",type:"button",onClick:e[0]||(e[0]=Object(i["cb"])((function(t){return s.show=!0}),["stop"]))},[Object(i["k"])("div",Qt,[Object(i["n"])(r,{round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem"},"lazy-load":"","show-loading":"",src:s.token.address===s.nativeToken?s.token.logo_url||s.token.logoURI:s.token.logoURI||t.$f.formatIcon((s.token.token||s.token.address)+"-"+o.chain),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(i["k"])("span",null,Object(i["T"])((null===(c=s.token)||void 0===c?void 0:c.symbol)||""),1)]),qt]),Object(i["n"])(p,{show:s.show,"onUpdate:show":e[2]||(e[2]=function(t){return s.show=t}),position:"right",style:{width:"100%",height:"100%"},"close-on-popstate":""},{default:Object(i["Z"])((function(){return[Object(i["k"])("form",Zt,[Object(i["n"])(u,{modelValue:s.keyword,"onUpdate:modelValue":e[1]||(e[1]=function(t){return s.keyword=t}),modelModifiers:{trim:!0},"show-action":"",background:"#fff",shape:"round",placeholder:t.$t("searchContractORName"),onSearch:l.onSearch,onCancel:l.onCancel},null,8,["modelValue","placeholder","onSearch","onCancel"])]),""!==s.keyword||o.isBalance?Object(i["i"])("",!0):(Object(i["G"])(),Object(i["j"])("div",Wt,Object(i["T"])(t.$t("popularTokens")),1)),Object(i["k"])("ul",Jt,[Object(i["ab"])(Object(i["n"])(d,{class:"empty",image:t.emptyNoDataLight,description:t.$t("empty")},null,8,["image","description"]),[[i["W"],s.searchTokens&&0===s.searchTokens.length&&!s.loading]]),Object(i["n"])(m,{items:s.searchTokens,"min-item-size":30,"key-field":"address","page-mode":"",class:"tokens"},{default:Object(i["Z"])((function(e){var a=e.item,c=e.index,u=e.active;return[Object(i["n"])(v,{item:a,active:u,"data-index":c},{default:Object(i["Z"])((function(){var e;return[Object(i["k"])("li",{class:"token-item",onClick:Object(i["cb"])((function(t){return l.handleSelectToken(a)}),["stop"])},[Object(i["n"])(r,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:a.address===s.nativeToken?a.logo_url||a.logoURI:a.logoURI||t.$f.formatIcon("".concat(a.address,"-").concat(a.chain||o.chain)),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(i["k"])("div",null,[Object(i["k"])("div",Xt,[Object(i["k"])("span",null,Object(i["T"])(a.symbol),1),a.risk_score>60?(Object(i["G"])(),Object(i["j"])("span",Kt,Object(i["T"])(t.$t("highRisk")),1)):Object(i["i"])("",!0)]),(null!==a&&void 0!==a&&null!==(e=a.tags)&&void 0!==e&&e.includes("tokens")||null===a||void 0===a||!a.tags)&&a.address!==s.nativeToken?(Object(i["G"])(),Object(i["j"])("div",te,Object(i["T"])(a.address.slice(0,6)+"..."+a.address.slice(-6)),1)):Object(i["i"])("",!0)]),ee,Object(i["k"])("div",ne,[Object(i["k"])("span",null,Object(i["T"])(a.amount?t.$f.formatNumber2(a.amount):""),1),ie,void 0!==a.price?(Object(i["G"])(),Object(i["j"])("span",oe,"$"+Object(i["T"])(a.amount?t.$f.formatNumber2(a.amount*a.price):""),1)):Object(i["i"])("",!0)]),a.address===(s.token.address||s.token.token)?(Object(i["G"])(),Object(i["h"])(b,{key:0,size:"0.32rem",color:"#558BED",name:"success"})):(Object(i["G"])(),Object(i["h"])(b,{key:1,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,Yt)]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])])]})),_:1},8,["show"])])}n("841c");var se=n("365c"),le=n("c9d9"),ce=null,re={name:"SwapSelectToken",props:{tokens:Array,initToken:Object,chain:String,hasNative:{type:Boolean,default:!0},isBalance:{type:Boolean,default:!1}},emits:["onSelect"],data:function(){var t=this;return{show:!1,keyword:"",token:this.initToken||{address:"",chain:"",symbol:""},searchTokens:this.tokens.filter((function(e){return t.hasNative||e.address!==le["e"]}))||[],loading:!1,nativeToken:le["e"]}},computed:{searchResultTokens:function(){var t,e=this;return(null===(t=this.searchTokens)||void 0===t?void 0:t.length)>0?this.searchTokens:this.tokens.filter((function(t){return e.hasNative||t.address!==le["e"]}))}},watch:{keyword:function(t){""!==t?this.tokenSearch():this.searchTokens=[]},show:function(t){var e=this;t&&(this.searchTokens=this.tokens.filter((function(t){return e.hasNative||t.address!==le["e"]}))||[])}},methods:{onSearch:function(t){console.log(t),ce&&(clearTimeout(ce),ce=null),this.search()},onCancel:function(){this.keyword="",this.show=!1},handleSelectToken:function(t){(null!==t&&void 0!==t&&t.address||null!==t&&void 0!==t&&t.token)&&(this.token=t,this.$emit("onSelect",t),this.show=!1)},tokenSearch:function(){var t=this;ce&&(clearTimeout(ce),ce=null),ce=setTimeout((function(){t.search()}),500)},search:function(){var t=this;if(""!==this.keyword){var e=new RegExp(this.keyword,"i"),n=this.tokens.filter((function(n){return(e.test(n.address)||e.test(n.symbol)||e.test(n.name))&&(t.hasNative||n.address!==le["e"])}));(null===n||void 0===n?void 0:n.length)>0?this.searchTokens=n:this.isBalance||(this.loading=!0,Object(se["s"])(this.keyword,this.chain).then((function(e){var n,i,o;t.searchTokens=null===(n=e.filter)||void 0===n||null===(i=n.call(e,(function(e){return e.chain===t.chain})))||void 0===i||null===(o=i.map)||void 0===o?void 0:o.call(i,(function(t){return Object(it["a"])(Object(it["a"])({},t),{},{address:t.token})}))})).catch((function(e){console.log(e),t.searchTokens=[]})).finally((function(){t.loading=!1})))}else this.searchTokens=this.tokens.filter((function(e){return t.hasNative||e.address!==le["e"]}))}}};n("508c");const ue=ct()(re,[["render",ae],["__scopeId","data-v-3f14acd9"]]);var de=ue,be=function(t){return Object(i["J"])("data-v-00715c37"),t=t(),Object(i["H"])(),t},ve={class:"swap-title"},me={class:"swap-info"},pe={class:"swap-info_item header"},he={class:"header-li"},fe={class:"header-li_left"},ke=["src"],je={class:"header-li_right"},Oe={class:"switch-box"},ge={class:"header-li"},Te={class:"header-li_left"},we=["src"],ye={class:"header-li_right"},xe={class:"swap-info_item"},$e={class:"swap-info_item-label"},_e={class:"swap-info_item-value"},Se={class:"p-item"},Ae={class:"p-item"},Ie={key:0,class:"swap-info_item"},Ce={class:"swap-info_item-label"},Pe={class:"swap-info_item-value"},Ne={class:"swap-info_item"},Ue={class:"swap-info_item-label"},Ge={class:"swap-info_item-value"},Le={key:1,class:"swap-info_item"},Ve={class:"swap-info_item-label"},Be={class:"swap-info_item-value"},Ee={class:"swap-info_item"},Re={class:"swap-info_item-label"},Me={class:"swap-info_item-value path-list"},ze={key:0},Fe={key:1,class:"path-amm"},De=be((function(){return Object(i["k"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},null,-1)})),He={key:2,class:"swap-info_item"},Qe={class:"swap-info_item-label"},qe={class:"swap-info_item-value"},Ze=["href"],We={class:"iconfont icon-copy",style:{"margin-left":"0.1rem"}},Je={class:"footer"};function Ye(t,e,o,a,s,l){var c=Object(i["O"])("van-icon"),r=Object(i["O"])("van-image"),u=Object(i["O"])("van-button"),d=Object(i["O"])("van-popup"),b=Object(i["P"])("copy");return Object(i["G"])(),Object(i["h"])(d,{show:l.dialogVisible,"onUpdate:show":e[0]||(e[0]=function(t){return l.dialogVisible=t}),style:Object(i["y"])({width:"90%",padding:"0.4rem"}),closeable:"",round:"",teleport:"#app"},{default:Object(i["Z"])((function(){var e,a,s,d,v,m,p,h;return[Object(i["k"])("header",ve,Object(i["T"])(t.$t("tradeConfirm")),1),Object(i["k"])("ul",me,[Object(i["k"])("li",pe,[Object(i["k"])("div",he,[Object(i["k"])("div",fe,[Object(i["k"])("img",{class:"icon-token",src:l.formatLogo(o.swapInfo.fromToken),alt:"",height:"20"},null,8,ke),Object(i["k"])("span",null,Object(i["T"])(o.swapInfo.fromToken.symbol),1)]),Object(i["k"])("div",je,Object(i["T"])(t.$f.formatNumber2(l.formatUnits(o.swapInfo.fromTokenAmount||0,o.swapInfo.fromToken.decimals))||"0"),1)]),Object(i["k"])("div",Oe,[Object(i["n"])(c,{class:"switch-icon",name:"down"})]),Object(i["k"])("div",ge,[Object(i["k"])("div",Te,[Object(i["k"])("img",{class:"icon-token",src:l.formatLogo(o.swapInfo.toToken),alt:"",height:"20"},null,8,we),Object(i["k"])("span",null,Object(i["T"])(o.swapInfo.toToken.symbol),1)]),Object(i["k"])("div",ye,Object(i["T"])(t.$f.formatNumber2(l.formatUnits(o.swapInfo.toTokenAmount||0,o.swapInfo.toToken.decimals))||"0"),1)])]),Object(i["k"])("li",xe,[Object(i["k"])("div",$e,Object(i["T"])(t.$t("price")),1),Object(i["k"])("div",_e,[Object(i["k"])("div",Se,"1 "+Object(i["T"])(o.swapInfo.fromToken.symbol)+" = "+Object(i["T"])(l.getPrice(l.formatUnits(o.swapInfo.fromTokenAmount||0,o.swapInfo.fromToken.decimals),l.formatUnits(o.swapInfo.toTokenAmount||0,o.swapInfo.toToken.decimals)))+" "+Object(i["T"])(o.swapInfo.toToken.symbol),1),Object(i["k"])("div",Ae,"1 "+Object(i["T"])(o.swapInfo.toToken.symbol)+" = "+Object(i["T"])(l.getPrice(l.formatUnits(o.swapInfo.toTokenAmount||0,o.swapInfo.toToken.decimals),l.formatUnits(o.swapInfo.fromTokenAmount||0,o.swapInfo.fromToken.decimals)))+" "+Object(i["T"])(o.swapInfo.fromToken.symbol),1)])]),o.swapInfo.fromToken.isWrapper&&o.swapInfo.toToken.isETH||o.swapInfo.toToken.isWrapper&&o.swapInfo.fromToken.isETH?Object(i["i"])("",!0):(Object(i["G"])(),Object(i["j"])("li",Ie,[Object(i["k"])("div",Ce,Object(i["T"])(t.$t("slippage")),1),Object(i["k"])("div",Pe,Object(i["T"])(o.slippage)+"%",1)])),Object(i["k"])("li",Ne,[Object(i["k"])("div",Ue,Object(i["T"])(t.$t("estimatedGas")),1),Object(i["k"])("div",Ge,"â‰ˆ $"+Object(i["T"])(l.getEstimatedFee(o.swapInfo.gasValue)),1)]),o.swapInfo.fromToken.isWrapper&&o.swapInfo.toToken.isETH||o.swapInfo.toToken.isWrapper&&o.swapInfo.fromToken.isETH?Object(i["i"])("",!0):(Object(i["G"])(),Object(i["j"])("li",Le,[Object(i["k"])("div",Ve,Object(i["T"])(t.$t("minimumReceived")),1),Object(i["k"])("div",Be,Object(i["T"])(l.minReceived)+" "+Object(i["T"])(null===(e=o.swapInfo)||void 0===e||null===(a=e.toToken)||void 0===a?void 0:a.symbol),1)])),Object(i["k"])("li",Ee,[Object(i["k"])("div",Re,Object(i["T"])(t.$t("tokenRoute")),1),Object(i["k"])("div",Me,[(Object(i["G"])(!0),Object(i["j"])(i["a"],null,Object(i["M"])(l.swapRouterPath,(function(t,e){return Object(i["G"])(),Object(i["j"])(i["a"],{key:e},[t.symbol?(Object(i["G"])(),Object(i["j"])("span",ze,Object(i["T"])(t.symbol),1)):Object(i["i"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(i["G"])(),Object(i["j"])("div",Fe,[Object(i["n"])(r,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"https://ave.s3.ap-east-1.amazonaws.com/swap/".concat(t.nextAmm,".jpeg"),"error-icon":n("aecc")},null,8,["src","error-icon"]),De])):Object(i["i"])("",!0)],64)})),128))])]),null!==(s=o.swapInfo)&&void 0!==s&&s.transaction?(Object(i["G"])(),Object(i["j"])("li",He,[Object(i["k"])("div",Qe,Object(i["T"])(t.$t("txHash")),1),Object(i["k"])("div",qe,[Object(i["k"])("a",{href:t.$f.formatExplorerUrl(o.chain,o.swapInfo.transaction,"tx"),target:"_blank"},Object(i["T"])((null===(d=o.swapInfo)||void 0===d||null===(v=d.transaction)||void 0===v?void 0:v.slice(0,6))+"..."+(null===(m=o.swapInfo)||void 0===m||null===(p=m.transaction)||void 0===p?void 0:p.slice(-6))),9,Ze),Object(i["ab"])(Object(i["k"])("i",We,null,512),[[b,null===(h=o.swapInfo)||void 0===h?void 0:h.transaction]])])])):Object(i["i"])("",!0)]),Object(i["k"])("div",Je,[Object(i["n"])(u,{class:"submit-button",type:"primary",loading:l.isLoading,"loading-text":t.$t("confirming"),block:"",onClick:Object(i["cb"])(l.submitSwap,["stop"])},{default:Object(i["Z"])((function(){return[Object(i["m"])(Object(i["T"])(t.$t("confirm")),1)]})),_:1},8,["loading","loading-text","onClick"])])]})),_:1},8,["show","style"])}var Xe=n("901e"),Ke=n.n(Xe),tn=n("6779"),en={name:"ConfirmSwap",props:{visible:Boolean,swapInfo:Object,slippage:String,loading:Boolean,chain:String,nativePrice:Number,gasPrice:String},emits:["update:visible","submit"],data:function(){return{}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}},isLoading:function(){return this.loading},minReceived:function(){var t,e,n;return this.$f.formatNumber(tn["utils"].formatUnits(new Ke.a((null===(t=this.swapInfo)||void 0===t?void 0:t.toTokenAmount)||0).times(100-Number(this.slippage)).div(100).toFixed(0),null===(e=this.swapInfo)||void 0===e||null===(n=e.toToken)||void 0===n?void 0:n.decimals)||0)},swapRouterPath:function(){var t;return(null===(t=this.swapInfo)||void 0===t?void 0:t.swapRouterPath)||[]}},methods:{formatUnits:tn["utils"].formatUnits,formatPrice:function(t){return this.$f.formatNumber(t&&""!==t?tn["utils"].formatEther(this.nativePrice):0)},getPrice:function(t,e){return!t||!e||isNaN(Number(t))||isNaN(Number(e))?"0":this.$f.formatNumber2(new Ke.a(e).div(t).toFixed())||"0"},getEstimatedFee:function(t){return t&&Number(new Ke.a(t.toString()).times(this.nativePrice).times(this.gasPrice).div(String(Math.pow(10,18))).toFixed(2))||"0"},submitSwap:function(){this.$emit("submit")},formatLogo:function(t){var e;return!t.logoURI||null!==t&&void 0!==t&&null!==(e=t.logoURI)&&void 0!==e&&e.includes("empty-token")?this.$f.formatIcon(t.address+"-"+this.chain):t.logoURI},goLink:function(){this.$f.openBrowser(this.$f.formatExplorerUrl(this.chain,this.swapInfo.transaction,"tx"))}}};n("54e2");const nn=ct()(en,[["render",Ye],["__scopeId","data-v-00715c37"]]);var on=nn,an={class:"chart-container"},sn=["id"];function ln(t,e,n,o,a,s){return Object(i["G"])(),Object(i["j"])("div",an,[Object(i["k"])("div",{id:a.chartId,style:{height:"60px",width:"100%"}},null,8,sn)])}var cn=n("313e"),rn={name:"PriceChart",props:{dataX:Array,dataY:Array},data:function(){return{chartId:"chart-".concat(Object(It["a"])()),myChart:null,loading:!1}},watch:{dataY:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dataX,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.dataY,i=e.map((function(e){return t.$f.formatDate(e,"MM-DD HH:mm")}));if(document.getElementById(this.chartId)){var o=cn["a"](document.getElementById(this.chartId));o||(o=cn["b"](document.getElementById(this.chartId)));var a={tooltip:{trigger:"axis",appendToBody:!0},grid:{left:"0",right:"0",top:"5%",bottom:"3%",containLabel:!0},xAxis:{data:i,axisLine:{show:!1,lineStyle:{color:"#23293C"}},axisLabel:{show:!1,color:"#777"},axisTick:{show:!1},nameTextStyle:{fontSize:12}},yAxis:{type:"value",name:"",nameTextStyle:{fontSize:14},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!1,lineStyle:{type:"solid",color:["#FF646D"]}}},series:[{name:"",type:"line",data:n,smooth:!0,symbolSize:3,areaStyle:{color:"#558BED",opacity:.2},itemStyle:{color:"#558BED",lineStyle:{color:"#558BED"}},tooltip:{valueFormatter:function(e){return"$"+t.$f.formatNumber2(e||0,3,4)}}}]};o.setOption(a)}}}};n("4e41");const un=ct()(rn,[["render",ln],["__scopeId","data-v-60f8861e"]]);var dn=un,bn=n("f465"),vn=null,mn=null,pn=null,hn={name:"Swap",components:{ChangeLang:ut,Slippage:xt,RTabs:Nt,PercentStep:zt,TxItem:Ft["a"],SwapSelectToken:de,ConfirmSwap:on,PriceChart:dn},data:function(){var t,e;return{height:290,swapTokenInfo:{},tokens:[],baseToken:{},baseTokenExtra:{},baseTokenChain:{},slippageVisible:!1,slippage:"1",tabActive:"buy",selected:"swap",dataX:[],dataY:[],amount:"",outAmount:"",token:{symbol:""},activeToken:{balance:0,address:le["e"],symbol:""},swapQuoteInfo:{},maxOutAmount:0,tabActive1:"swap",searchShow:!1,keyword:"",isPairShowMore:!1,quoteLoading:!1,allowance:0,loadingApprove:!1,loadingSwap:!1,dialogVisibleSwap:!1,swapSubmitInfo:{},swapInfo:{fromToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},toToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""}},loadingConfirmSwap:!1,tokensPrice:{},swapRouterPath:[],nativePrice:0,quoteMaxLoading:!1,initTxs:[],txsLoading:!1,isCurrentToken:!0,userTotalTokens:[],userBalanceTokens:[],isAndroid:!(null===(t=window)||void 0===t||null===(e=t._tw_)||void 0===e||!e.appGetPlatform),gasPrice:"0",isPercentChange:!1,spender:"",isTaxHigh:!1,isCannotSellAll:!1,baseTokenPrice:0,isTax:!1,txsTokens:localStorage.txsTokens?JSON.parse(localStorage.txsTokens):[],dialogSwapSubmittedVisible:!1,isAmount:!0}},computed:{languageText:function(){var t={"zh-cn":"Cn",en:"En","zh-tw":"Tc"};return t[this.$store.getters.language]||"En"},currentAccount:function(){return this.$store.state.currentAccount||""},currentAccountSplit:function(){return this.currentAccount.replace(new RegExp("(.{6})(.+)(.{4})"),"$1...$3")},netId:function(){return this.$store.getters.netId},tokenInfo:function(){var t,e,n,i,o=null===(t=this.$route.params)||void 0===t||null===(e=t.id)||void 0===e||null===(n=e.split)||void 0===n?void 0:n.call(e,"-"),a=Object(ot["a"])(o,2),s=a[0],l=a[1];return{id:null===(i=this.$route.params)||void 0===i?void 0:i.id,token:s,chain:l}},tabs:function(){return[{name:this.$t("buy"),value:"buy"},{name:this.$t("sell"),value:"sell"}]},filterTokens:function(){var t=new RegExp(this.keyword,"i");return this.tokens.filter((function(e){return t.test(e.address)||t.test(e.symbol)||t.test(e.name)}))},isApprove:function(){if(!this.allowance)return!1;if("sell"===this.tabActive){var t,e,n,i=(null===(t=this.baseToken)||void 0===t||null===(e=t.token)||void 0===e?void 0:e.decimals)||(null===(n=this.baseTokenChain)||void 0===n?void 0:n.decimals)||0;return tn["utils"].parseUnits(new Ke.a(this.amount||0).toFixed(i),i).lte(this.allowance)}var o,a=(null===(o=this.activeToken)||void 0===o?void 0:o.decimals)||0;return tn["utils"].parseUnits(new Ke.a(this.outAmount||0).toFixed(a),a).lte(this.allowance)},fromToken:function(){var t,e,n,i,o,a,s,l,c,r,u,d,b,v,m,p,h=0,f="",k=0,j=(null===(t=this.$route.params)||void 0===t||null===(e=t.id)||void 0===e||null===(n=e.split)||void 0===n||null===(i=n.call(e,"-"))||void 0===i?void 0:i[0])||"",O="",g=0;"sell"===this.tabActive?(f=j,h=this.amount,k=(null===(o=this.baseTokenChain)||void 0===o?void 0:o.balance)||0,O=(null===(a=this.baseTokenChain)||void 0===a?void 0:a.symbol)||(null===(s=this.baseToken)||void 0===s||null===(l=s.token)||void 0===l?void 0:l.symbol)||"",g=(null===(c=this.baseTokenChain)||void 0===c?void 0:c.decimals)||(null===(r=this.baseToken)||void 0===r||null===(u=r.token)||void 0===u?void 0:u.decimals)||0):(f=(null===(d=this.activeToken)||void 0===d?void 0:d.address)||(null===(b=this.activeToken)||void 0===b?void 0:b.token),h=this.outAmount,k=(null===(v=this.activeToken)||void 0===v?void 0:v.balance)||0,O=(null===(m=this.activeToken)||void 0===m?void 0:m.symbol)||"",g=(null===(p=this.activeToken)||void 0===p?void 0:p.decimals)||0);return{balance:k,amount:h,address:f,symbol:O,decimals:g}},toToken:function(){var t,e,n,i,o,a,s,l,c,r,u,d,b,v,m,p,h=0,f="",k=0,j=(null===(t=this.$route.params)||void 0===t||null===(e=t.id)||void 0===e||null===(n=e.split)||void 0===n||null===(i=n.call(e,"-"))||void 0===i?void 0:i[0])||"",O=0,g="";"sell"===this.tabActive?(f=(null===(o=this.activeToken)||void 0===o?void 0:o.address)||(null===(a=this.activeToken)||void 0===a?void 0:a.token),h=this.outAmount,k=(null===(s=this.activeToken)||void 0===s?void 0:s.balance)||0,g=(null===(l=this.activeToken)||void 0===l?void 0:l.symbol)||"",O=(null===(c=this.activeToken)||void 0===c?void 0:c.decimals)||0):(f=j,h=this.amount,k=(null===(r=this.baseTokenChain)||void 0===r?void 0:r.balance)||0,g=(null===(u=this.baseTokenChain)||void 0===u?void 0:u.symbol)||(null===(d=this.baseToken)||void 0===d||null===(b=d.token)||void 0===b?void 0:b.symbol)||"",O=(null===(v=this.baseTokenChain)||void 0===v?void 0:v.decimals)||(null===(m=this.baseToken)||void 0===m||null===(p=m.token)||void 0===p?void 0:p.decimals)||0);return{balance:k,amount:h,address:f,symbol:g,decimals:O}},minReceived:function(){var t,e;return new Ke.a(null===(t=this.toToken)||void 0===t?void 0:t.amount).times(100-this.slippage).div(100).toFixed((null===(e=this.toToken)||void 0===e?void 0:e.decimals)||0)},txs:function(){if(this.isCurrentToken){var t,e,n,i,o,a,s,l,c,r,u=null===(t=this.$route.params)||void 0===t||null===(e=t.id)||void 0===e||null===(n=e.split)||void 0===n||null===(i=n.call(e,"-"))||void 0===i?void 0:i[0],d=null===(o=this.$route.params)||void 0===o||null===(a=o.id)||void 0===a||null===(s=a.split)||void 0===s||null===(l=s.call(a,"-"))||void 0===l?void 0:l[1],b=null===(c=this.$store.state)||void 0===c||null===(r=c.chainConfig)||void 0===r?void 0:r[d],v=null===b||void 0===b?void 0:b.wmainWrapper;return u=u===le["e"]?v:u,this.initTxs.filter((function(t){return t.from_address===u||t.to_address===u}))}return this.initTxs},taxStr:function(){var t,e,n,i,o,a,s,l=(null===(t=this.swapQuoteInfo)||void 0===t?void 0:t.totalTax)||((null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.total_sell_tax)||0)+((null===(n=this.swapQuoteInfo)||void 0===n?void 0:n.total_buy_tax)||0);return l>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(l,1),"%)"):"buy"===this.tabActive&&(null===(i=this.baseTokenExtra)||void 0===i?void 0:i.buy_tax)>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(null===(a=this.baseTokenExtra)||void 0===a?void 0:a.buy_tax,1),"%)"):"sell"===this.tabActive&&(null===(o=this.baseTokenExtra)||void 0===o?void 0:o.sell_tax)>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(null===(s=this.baseTokenExtra)||void 0===s?void 0:s.sell_tax,1),"%)"):""},priceImpactH:function(){return this.priceImpactV>.1||this.priceImpactV<-.1},priceImpactV:function(){if(!Number(this.amount)&&!Number(this.outAmount))return"";var t=this.swapQuoteInfo.routerPath,e=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[0]:null,n=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[t.length-1]:null;if(e&&n){var i=this.swapQuoteInfo.from_price,o=this.swapQuoteInfo.to_price,a=tn["utils"].formatUnits(e.amount,e.decimals),s=tn["utils"].formatUnits(n.amount,n.decimals);return new Ke.a(a).times(i).div(new Ke.a(s).times(o)).minus(1).abs()}return""},priceImpact:function(){return this.priceImpactV?this.$f.formatNumber2(this.priceImpactV.times(100).toFixed(),2)+"%":""},swapButtonColor:function(){var t,e,n,i,o="buy"===this.tabActive?this.$store.getters.upColor[3]:this.$store.getters.downColor[3];return null!==(t=this.priceImpactV)&&void 0!==t&&null!==(e=t.gt)&&void 0!==e&&e.call(t,.4)?o="#999":null!==(n=this.priceImpactV)&&void 0!==n&&null!==(i=n.gt)&&void 0!==i&&i.call(n,.1)&&(o="#F7933F"),o},priceImpactColor:function(){var t,e,n,i,o,a;return null!==(t=this.priceImpactV)&&void 0!==t&&null!==(e=t.gt)&&void 0!==e&&e.call(t,.4)?"#F81111":null!==(n=this.priceImpactV)&&void 0!==n&&null!==(i=n.gt)&&void 0!==i&&i.call(n,.1)?"#F7933F":null!==(o=this.priceImpactV)&&void 0!==o&&null!==(a=o.gt)&&void 0!==a&&a.call(o,.05)?"#f8be46":""},loadingSwapTxt:function(){return this.loadingSwap?"buy"===this.tabActive?this.$t("buying"):this.$t("selling"):""},percent:function(){return this.$refs.percentStep.activePercent||0},userTokens:function(){var t=this,e=this.userTotalTokens.filter((function(e){return t.txsTokens.some((function(t){var n,i,o,a;return(null===(n=t.address)||void 0===n||null===(i=n.toLowerCase)||void 0===i?void 0:i.call(n))===(null===(o=e.id)||void 0===o||null===(a=o.toLowerCase)||void 0===a?void 0:a.call(o))}))&&t.userBalanceTokens.every((function(t){var n,i,o,a;return(null===(n=t.address)||void 0===n||null===(i=n.toLowerCase)||void 0===i?void 0:i.call(n))!==(null===(o=e.id)||void 0===o||null===(a=o.toLowerCase)||void 0===a?void 0:a.call(o))}))})).map((function(t){var e={},n=(t.id+"-"+t.chain).toLowerCase();return t.id===t.chain?(e.address=le["e"],n="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee-"+t.chain):e.address=t.id,e=Object(it["a"])(Object(it["a"])(Object(it["a"])({},e),t),{},{id:n}),e}));return e.concat(this.userBalanceTokens).slice().sort((function(t,e){return t.is_verified===e.is_verified?t.address===le["e"]?-1:e.address===le["e"]?1:e.amount*e.price-t.amount*t.price:Boolean(e.is_verified)-Boolean(t.is_verified)}))}},watch:{amount:function(t){if(!this.quoteLoading||this.isAmount){var e=Number(t);""===t?(this.outAmount="",this.$refs.percentStep.activePercent=0,this.quoteLoading=!1):0===e&&0!==Number(this.outAmount)?(this.outAmount=0,this.quoteLoading=!1,this.$refs.percentStep.activePercent=0):e&&(this.isAmount=!0,this.getQuoteInfo()),this.quoteMaxLoading||this.quoteLoading||this.isPercentChange||(this.$refs.percentStep.activePercent=0)}},outAmount:function(t){if(!this.quoteLoading||!this.isAmount){var e=Number(t);""===t?(this.amount="",this.quoteLoading=!1,this.$refs.percentStep.activePercent=0):0===e&&0!==Number(this.amount)?(this.amount=0,this.quoteLoading=!1,this.$refs.percentStep.activePercent=0):e&&(this.isAmount=!1,this.getQuoteInfo(!1)),this.quoteMaxLoading||this.quoteLoading||this.isPercentChange||(this.$refs.percentStep.activePercent=0)}},tabActive:function(t){t&&(this.$refs.percentStep.activePercent=0,this.amount="",this.outAmount="",this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.getApproveAllowance(),this.handleTaxSlippage(),this.isTaxHigh=!1,this.isCannotSellAll=!1)},"$route.params.id":function(t){t&&(this.slippage="1",this.isTaxHigh=!1,this.isCannotSellAll=!1,this.baseTokenExtra={},this.baseTokenPrice=0,this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.getBaseToken(),this.getUserAllTxs(),this.getSwapTokensPrice(),this.getUserTokenList(),this.getApproveAllowance(),this.getTokenDetails(),this.supportChain())},"$store.state.currentAccount":function(t){t&&(this.slippage="1",this.isTaxHigh=!1,this.isCannotSellAll=!1,this.getUserAllTxs(),this.getUserTokenList(),this.getSwapTokens(),this.getApproveAllowance(),this.getTokenDetails())},isPairShowMore:function(){this.getLeftHeight()}},mounted:function(){this.init()},methods:{init:function(){this.getGasPrice(),this.getSwapTokens(),this.getBaseToken(),this.getSwapTokensPrice(),this.getUserAllTxs(),this.getUserTokenList(),this.supportChain()},formatUnits:tn["utils"].formatUnits,formatPrice:function(t){return this.$f.formatNumber(t&&""!==t&&this.$store.state.tokensPrice[t]||0)},getPrice:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!t||!e||isNaN(Number(t))||isNaN(Number(e))?"0":this.$f.formatNumber2(new Ke.a(e).times(100-n).div(100*t).toFixed(7))||"0"},getLeftHeight:function(){var t=this;this.$nextTick((function(){var e=Object(bn["o"])(t.$refs.swapLeft),n=e.height;t.height=n}))},handleWalletAddress:function(){""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet?window.ethereum?(this.$store.state.importAddressVisible=!1,this.$store.commit("changeConnectVisible",!0)):this.$toast({message:this.$t("browserWalletNotDetected"),position:"top"}):this.$store.commit("changeDisconnectVisible",!0)},submitSlippage:function(t){this.slippage=t,this.slippageVisible=!1},handleTaxSlippage:function(){var t,e;if("buy"===this.tabActive&&(null===(t=this.baseTokenExtra)||void 0===t?void 0:t.buy_tax)>0){var n,i;if(Number(this.slippage)>Number(null===(n=this.baseTokenExtra)||void 0===n?void 0:n.buy_tax)+1)return;this.slippage=String(Number(Math.min(Number(null===(i=this.baseTokenExtra)||void 0===i?void 0:i.buy_tax)+1,49.99).toFixed(2)))}if("sell"===this.tabActive&&(null===(e=this.baseTokenExtra)||void 0===e?void 0:e.sell_tax)>0){var o,a;if(Number(this.slippage)>Number(null===(o=this.baseTokenExtra)||void 0===o?void 0:o.sell_tax)+1)return;this.slippage=String(Number(Math.min(Number(null===(a=this.baseTokenExtra)||void 0===a?void 0:a.sell_tax)+1,49.99).toFixed(2)))}},handlePercentChange:function(t){var e=this;if(this.isPercentChange=!0,"buy"===this.tabActive){var n,i,o=(null===(n=this.activeToken)||void 0===n?void 0:n.balance)||0,a=(null===(i=this.activeToken)||void 0===i?void 0:i.decimals)||0,s=Math.min(a,6);0===t?(this.outAmount="",this.amount=""):this.outAmount=100===t?o:new Ke.a(Math.floor(new Ke.a(t).times(o).times(Math.pow(10,s-2)).toFixed())).div(Math.pow(10,s)).toFixed()}else{var l,c,r=(null===(l=this.baseTokenChain)||void 0===l?void 0:l.balance)||0,u=(null===(c=this.baseTokenChain)||void 0===c?void 0:c.decimals)||0,d=Math.min(u,6);0===t?(this.outAmount="",this.amount=""):100===t?(console.log("balance",r),this.amount=r):(this.amount=new Ke.a(Math.floor(new Ke.a(t).times(r).times(Math.pow(10,d-2)).toFixed())).div(Math.pow(10,d)).toFixed(),console.log("amount",this.amount))}this.$nextTick((function(){e.isPercentChange=!1}))},onSubmit:function(){var t,e,n,i;if(""!==this.$store.state.wallet&&"importAddress"!==this.$store.state.wallet){if(this.supportChain()){var o=this.$store.getters.netId||(null===(t=this.$route.params)||void 0===t||null===(e=t.id)||void 0===e||null===(n=e.split)||void 0===n||null===(i=n.call(e,"-"))||void 0===i?void 0:i[1])||"";o===this.netId?"swap"===this.selected&&(this.isApprove?this.getSwapTx():this.approve()):this.$toast({message:this.$t("plsSwitchChain",{chain:o}),position:"top"})}}else this.handleWalletAddress()},getSwapTokens:function(){var t,e,n,i,o=this,a=this.$store.getters.netId||(null===(t=this.$route.params)||void 0===t||null===(e=t.id)||void 0===e||null===(n=e.split)||void 0===n||null===(i=n.call(e,"-"))||void 0===i?void 0:i[1])||"",s=localStorage.swapActiveToken?JSON.parse(localStorage.swapActiveToken):{};null!==s&&void 0!==s&&s.address&&a===s.chain&&(this.activeToken=s),Object(se["m"])(a).then((function(t){var e=t.map((function(t){return Object(it["a"])(Object(it["a"])({},t),{},{address:t.token,decimals:t.decimal||t.decimals})}));null!==s&&void 0!==s&&s.address&&a===s.chain||(o.activeToken=e.find((function(t){return t.address===le["e"]}))),o.tokens=e,localStorage.swapTokenList=JSON.stringify(e),o.getApproveAllowance(),o.getTokenDetails()}))},getUserTokenList:function(){var t=this;Promise.all([this.$store.dispatch("getUserTokenList"),Object(se["e"])()]).then((function(e){var n=Object(ot["a"])(e,2),i=n[0],o=n[1];t.userTotalTokens=i,t.userBalanceTokens=i.filter((function(t){return t.is_verified||o.some((function(e){return e.token===t.id}))})).map((function(t){var e={},n=(t.id+"-"+t.chain).toLowerCase();return t.id===t.chain?(e.address=le["e"],n="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee-"+t.chain):e.address=t.id,e=Object(it["a"])(Object(it["a"])(Object(it["a"])({},e),t),{},{id:n}),e}))}))},getTokenDetails:function(){var t,e,n,i,o,a,s,l,c,r,u,d,b=this;if(this.$store.getters.netId===(null===(t=this.$route.params)||void 0===t||null===(e=t.id)||void 0===e||null===(n=e.split)||void 0===n||null===(i=n.call(e,"-"))||void 0===i?void 0:i[1])){var v,m=null===(o=this.$route.params)||void 0===o||null===(a=o.id)||void 0===a||null===(s=a.split)||void 0===s||null===(l=s.call(a,"-"))||void 0===l?void 0:l[0],p=this.$store.getters.netId||(null===(c=this.$route.params)||void 0===c||null===(r=c.id)||void 0===r||null===(u=r.split)||void 0===u||null===(d=u.call(r,"-"))||void 0===d?void 0:d[1])||"";if(m&&p)Promise.all([Object(se["k"])(null===(v=this.activeToken)||void 0===v?void 0:v.address,p).then(function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return b.activeToken||(b.activeToken={}),b.activeToken.balance=(null===e||void 0===e?void 0:e.balance)||0,t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(se["k"])(m,p).then(function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return b.baseTokenChain=e,t.abrupt("return",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())]).then((function(){b.getQuoteMaxInfo()}))}},getBaseToken:function(){var t,e=this;pn&&clearTimeout(pn);var n=null===(t=this.$route.params)||void 0===t?void 0:t.id,i=n;if(i){var o,a,s,l,c=null===(o=i.split("-"))||void 0===o?void 0:o[0],r=null===(a=i.split("-"))||void 0===a?void 0:a[1],u=null===(s=this.$store.state)||void 0===s||null===(l=s.chainConfig)||void 0===l?void 0:l[r],d=null===u||void 0===u?void 0:u.wmainWrapper,b=null===u||void 0===u?void 0:u.mainName;c===le["e"]&&r&&d&&(i=d+"-"+r);var v=Object(se["h"])(n).then(function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(n){var i,o,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.baseToken=Object(it["a"])(Object(it["a"])({},n),c===le["e"]?{token:Object(it["a"])(Object(it["a"])({},n.token),{},{token:c,symbol:b})}:{}),o=null===n||void 0===n||null===(i=n.pairs)||void 0===i?void 0:i[0],a=null===o||void 0===o?void 0:o.pair,s=null===o||void 0===o?void 0:o.chain,a&&e.getKlineHistory(a+"-"+s),e.getLeftHeight(),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),m=Object(se["l"])(n).then(function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.baseTokenExtra=n,e.handleTaxSlippage(),t.abrupt("return",n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());Promise.all([v,m]).finally((function(){pn=setTimeout((function(){e.getBaseToken()}),6e4)}))}},getQuoteInfo:function(){var t,e,n,i,o=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("Swap"===this.$route.name&&this.supportChain())if(Number(this.amount)||Number(this.outAmount)){vn&&(clearTimeout(vn),vn=null);var s=this.$store.getters.netId||(null===(t=this.$route.params)||void 0===t||null===(e=t.id)||void 0===e||null===(n=e.split)||void 0===n||null===(i=n.call(e,"-"))||void 0===i?void 0:i[1])||"";vn=setTimeout((function(){if("sell"===o.tabActive){if(o.amount&&o.activeToken.address||o.outAmount&&o.activeToken.address){var t,e,n,i,l,c,r=(null===(t=o.baseToken)||void 0===t||null===(e=t.token)||void 0===e?void 0:e.decimals)||(null===(n=o.baseTokenChain)||void 0===n?void 0:n.decimals),u=null===(i=o.activeToken)||void 0===i?void 0:i.decimals;o.quoteLoading=!0;var d={from_token:o.tokenInfo.address||(null===(l=o.baseToken)||void 0===l||null===(c=l.token)||void 0===c?void 0:c.token),to_token:o.activeToken.address,amountIn:a?tn["utils"].parseUnits(new Ke.a(o.amount||0).toFixed().match(new RegExp("[0-9]+(\\.[0-9]{0,".concat(r,"})?")))[0],r).toString():0,amountOut:a?0:tn["utils"].parseUnits(new Ke.a(o.outAmount||0).toFixed().match(new RegExp("[0-9]+(\\.[0-9]{0,".concat(u,"})?")))[0],u).toString()};Object(se["q"])(d,s).then((function(t){var e=t.routerPath,n=!1;if(a){var i,s=tn["utils"].parseUnits(new Ke.a(o.amount||0).toFixed().match(new RegExp("[0-9]+(\\.[0-9]{0,".concat(r,"})?")))[0],r).toString(),l=(null===(i=e[0])||void 0===i?void 0:i.amount)||0;n=s===l}else{var c,d=tn["utils"].parseUnits(new Ke.a(o.outAmount||0).toFixed().match(new RegExp("[0-9]+(\\.[0-9]{0,".concat(u,"})?")))[0],u).toString(),b=(null===(c=e[e.length-1])||void 0===c?void 0:c.amount)||0;n=d===b}if(n){if(1===t.from_cannot_sell_all){var v,m=new Ke.a(tn["utils"].parseUnits(String(o.baseTokenChain.balance),null===(v=o.baseTokenChain)||void 0===v?void 0:v.decimals).toString()),p=new Ke.a(null===t||void 0===t?void 0:t.routerPath[0].amount);o.isCannotSellAll=m.gt(0)&&p.div(m).gt(.99999)}else o.isCannotSellAll=!1;o.isTax=t.totalTax>0||t.total_sell_tax>0||t.total_buy_tax>0;var h=o.getPriceImpact(t);if(o.isTax||h.gt(.5)){o.isTaxHigh=t.total_sell_tax+t.total_buy_tax+1>49.99;var f=t.totalTax||t.total_sell_tax+t.total_buy_tax,k=Number(h),j=f+k+(f>5||k>5?2:1);o.slippage=String(Number(Math.min(j,49.99).toFixed(2)))}else o.isTaxHigh=!1,o.slippage="1";if(o.swapQuoteInfo=t,o.swapRouterPath=e.map((function(e,n){var i,o;return{symbol:e.symbol,nextAmm:(null===t||void 0===t||null===(i=t.pair_path)||void 0===i||null===(o=i[n])||void 0===o?void 0:o.amm)||""}})),a){var O,g=e[e.length-1];o.outAmount=tn["utils"].formatUnits(g.amount||"0",(null===g||void 0===g?void 0:g.decimals)||(null===(O=o.activeToken)||void 0===O?void 0:O.decimals))}else{var T,w,y,x=e[0];o.amount=tn["utils"].formatUnits(x.amount||"0",(null===x||void 0===x?void 0:x.decimals)||(null===(T=o.baseToken)||void 0===T||null===(w=T.token)||void 0===w?void 0:w.decimals)||(null===(y=o.baseTokenChain)||void 0===y?void 0:y.decimals))}var $=t.totalTax||t.total_sell_tax+t.total_buy_tax||0;o.baseTokenPrice=new Ke.a(o.outAmount).div(o.amount).times(100-$).div(100).toFixed(),n&&o.$nextTick((function(){setTimeout((function(){o.quoteLoading=!1}),800)}))}})).catch((function(t){console.log(t),o.$f.handleError(t),a?o.outAmount="":o.amount="",o.$nextTick((function(){setTimeout((function(){o.quoteLoading=!1}),800)}))}))}}else if("buy"===o.tabActive&&(o.amount&&o.activeToken.address||o.outAmount&&o.activeToken.address)){var b,v,m,p,h,f,k=(null===(b=o.baseToken)||void 0===b||null===(v=b.token)||void 0===v?void 0:v.decimals)||(null===(m=o.baseTokenChain)||void 0===m?void 0:m.decimals),j=null===(p=o.activeToken)||void 0===p?void 0:p.decimals;console.log(o.activeToken),o.quoteLoading=!0;var O={from_token:o.activeToken.address,to_token:o.tokenInfo.address||(null===(h=o.baseToken)||void 0===h||null===(f=h.token)||void 0===f?void 0:f.token),amountIn:a?0:tn["utils"].parseUnits(new Ke.a(o.outAmount||0).toFixed().match(new RegExp("[0-9]+(\\.[0-9]{0,".concat(j,"})?")))[0],j).toString(),amountOut:a?tn["utils"].parseUnits(new Ke.a(o.amount||0).toFixed().match(new RegExp("[0-9]+(\\.[0-9]{0,".concat(k,"})?")))[0],k).toString():0};Object(se["q"])(O,s).then((function(t){var e=t.routerPath,n=!1;if(a){var i,s=tn["utils"].parseUnits(new Ke.a(o.amount||0).toFixed().match(new RegExp("[0-9]+(\\.[0-9]{0,".concat(k,"})?")))[0],k).toString(),l=(null===(i=e[e.length-1])||void 0===i?void 0:i.amount)||0;n=s===l}else{var c,r=tn["utils"].parseUnits(new Ke.a(o.outAmount||0).toFixed().match(new RegExp("[0-9]+(\\.[0-9]{0,".concat(j,"})?")))[0],j).toString(),u=(null===(c=e[0])||void 0===c?void 0:c.amount)||0;n=r===u}if(n){if(1===t.from_cannot_sell_all){var d,b=new Ke.a(tn["utils"].parseUnits(String(o.activeToken.balance),null===(d=o.activeToken)||void 0===d?void 0:d.decimals).toString()),v=new Ke.a(null===t||void 0===t?void 0:t.routerPath[0].amount);o.isCannotSellAll=b.gt(0)&&v.div(b).gt(.99999)}else o.isCannotSellAll=!1;o.isTax=t.totalTax>0||t.total_sell_tax>0||t.total_buy_tax>0;var m=o.getPriceImpact(t);if(o.isTax||m.gt(.5)){o.isTaxHigh=t.total_sell_tax+t.total_buy_tax+1>49.99;var p=t.totalTax||t.total_sell_tax+t.total_buy_tax,h=Number(m),f=p+h+(p>5||h>5?2:1);o.slippage=String(Number(Math.min(f,49.99).toFixed(2)))}else o.isTaxHigh=!1,o.slippage="1";if(o.swapQuoteInfo=t,o.swapRouterPath=e.map((function(e,n){var i,o;return{symbol:e.symbol,nextAmm:(null===t||void 0===t||null===(i=t.pair_path)||void 0===i||null===(o=i[n])||void 0===o?void 0:o.amm)||""}})),a){var O,g=e[0];o.outAmount=tn["utils"].formatUnits(g.amount||"0",(null===g||void 0===g?void 0:g.decimals)||(null===(O=o.activeToken)||void 0===O?void 0:O.decimals))}else{var T,w,y,x=e[e.length-1];o.amount=tn["utils"].formatUnits(x.amount||"0",(null===x||void 0===x?void 0:x.decimals)||(null===(T=o.baseToken)||void 0===T||null===(w=T.token)||void 0===w?void 0:w.decimals)||(null===(y=o.baseTokenChain)||void 0===y?void 0:y.decimals))}var $=t.totalTax||t.total_sell_tax+t.total_buy_tax||0;o.baseTokenPrice=new Ke.a(o.outAmount).div(o.amount).times(100-$).div(100).toFixed(),n&&o.$nextTick((function(){setTimeout((function(){o.quoteLoading=!1}),800)}))}})).catch((function(t){console.log(t),o.$f.handleError(t),a?o.outAmount="":o.amount="",o.$nextTick((function(){setTimeout((function(){o.quoteLoading=!1}),800)}))}))}}),500)}else this.quoteLoading=!1},getQuoteMaxInfo:function(){var t,e,n,i=this,o=(null===(t=this.$route.params)||void 0===t||null===(e=t.id)||void 0===e||null===(n=e.split("-"))||void 0===n?void 0:n[1])||this.$store.getters.netId||"";if("Swap"===this.$route.name&&"buy"===this.tabActive&&this.activeToken.balance&&Number(this.activeToken.balance)){var a,s,l={to_token:this.tokenInfo.address||(null===(a=this.baseToken)||void 0===a||null===(s=a.token)||void 0===s?void 0:s.token),from_token:this.activeToken.address,amountIn:tn["utils"].parseUnits(String(this.activeToken.balance),this.activeToken.decimals).toString(),amountOut:0};this.quoteMaxLoading=!1,Object(se["q"])(l,o).then((function(t){var e,n,o,a=t.routerPath,s=a[a.length-1];i.maxOutAmount=tn["utils"].formatUnits((null===s||void 0===s?void 0:s.amount)||"0",(null===s||void 0===s?void 0:s.decimals)||(null===(e=i.baseToken)||void 0===e||null===(n=e.token)||void 0===n?void 0:n.decimals)||(null===(o=i.baseTokenChain)||void 0===o?void 0:o.decimals)),i.percent>0&&i.handlePercentChange(i.percent),i.quoteMaxLoading=!1})).catch((function(){i.quoteMaxLoading=!1}))}},handleSelectBaseToken:function(t){var e,n,i,o=(null===(e=this.$route.params)||void 0===e||null===(n=e.id)||void 0===n||null===(i=n.split("-"))||void 0===i?void 0:i[1])||this.$store.getters.netId||"";this.$router.replace({name:"Swap",params:{id:((null===t||void 0===t?void 0:t.address)||(null===t||void 0===t?void 0:t.token))+"-"+o}}),this.amount="",this.baseToken={token:Object(it["a"])(Object(it["a"])({},t),{},{token:t.address})},this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.slippage="1",this.baseTokenPrice=0},handleSelectToken:function(t){this.amount="",this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.baseTokenPrice=0,this.activeToken=t,localStorage.swapActiveToken=JSON.stringify(t),this.getTokenDetails(),this.getApproveAllowance()},getApproveAllowance:function(){var t,e,n,i,o=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.spender;if(this.$store.getters.netId===(null===(t=this.$route.params)||void 0===t||null===(e=t.id)||void 0===e||null===(n=e.split)||void 0===n||null===(i=n.call(e,"-"))||void 0===i?void 0:i[1])){var s="";if("sell"===this.tabActive){var l,c,r,u,d=null===(l=this.$route.params)||void 0===l||null===(c=l.id)||void 0===c||null===(r=c.split)||void 0===r||null===(u=r.call(c,"-"))||void 0===u?void 0:u[0];s=d}else{var b,v;s=(null===(b=this.activeToken)||void 0===b?void 0:b.address)||(null===(v=this.activeToken)||void 0===v?void 0:v.token)}Object(se["a"])(s,a).then((function(t){o.allowance=t.toString()}))}},approve:function(){var t=arguments,e=this;return Object(nt["a"])(regeneratorRuntime.mark((function n(){var i,o,a,s,l,c,r,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=t.length>0&&void 0!==t[0]?t[0]:e.spender,o="","sell"===e.tabActive?(r=null===(a=e.$route.params)||void 0===a||null===(s=a.id)||void 0===s||null===(l=s.split)||void 0===l||null===(c=l.call(s,"-"))||void 0===c?void 0:c[0],o=r):o=(null===(u=e.activeToken)||void 0===u?void 0:u.address)||(null===(d=e.activeToken)||void 0===d?void 0:d.token),e.loadingApprove=!0,Object(se["b"])(o,i).then((function(t){return t.wait()})).then((function(t){console.log(t),e.getApproveAllowance()})).catch((function(t){console.log("err",t),e.$f.handleError(t)})).finally((function(){e.loadingApprove=!1}));case 5:case"end":return n.stop()}}),n)})))()},getSwapTx:function(){var t,e,n=this;this.checkAmount()?(null===(t=this.swapQuoteInfo)||void 0===t||null===(e=t.routerPath)||void 0===e?void 0:e.length)>0&&(this.loadingSwap=!0,Object(se["t"])(this.swapQuoteInfo,this.slippage).then(function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.swapSubmitInfo=e,n.swapInfo=e.swapInfo,n.swapInfo.gasValue=e.gasValue,n.swapInfo.swapRouterPath=n.swapRouterPath,n.loadingSwap=!1,console.log("swapInfo",n.swapInfo),n.dialogVisibleSwap=!0;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.log("err--",t),n.loadingSwap=!1,n.$f.handleError(t)}))):this.$dialog.alert({title:this.$t("tips"),message:this.checkAmountMessage(),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})},submitSwap:function(){var t=arguments,e=this;return Object(nt["a"])(regeneratorRuntime.mark((function n(){var i,o,a,s,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:e.swapSubmitInfo,n.prev=1,e.loadingConfirmSwap=!0,n.next=5,i.swapCallStatic.apply(i,Object(et["a"])(i.params));case 5:o=n.sent,console.log("swapCallStaticResult",o.toString()),a=i.swapInfo,s=!(a.fromToken.isWrapper&&a.toToken.isETH||a.toToken.isWrapper&&a.fromToken.isETH),l={from_address:a.fromToken.address,from_symbol:a.fromToken.symbol,from_amount:Number(tn["utils"].formatUnits(a.fromTokenAmount||0,a.fromToken.decimals)),to_address:a.toToken.address,to_symbol:a.toToken.symbol,to_amount:Number(tn["utils"].formatUnits(a.toTokenAmount||0,a.toToken.decimals)),chain:e.netId,transaction:"",wallet_address:e.$store.state.currentAccount},i.swap.apply(i,Object(et["a"])(i.params)).then((function(t){if(console.log("---confirm transaction---",t),e.swapInfo.transaction=t.hash,s){l.transaction=t.hash;var n={time:parseInt(Date.now()/1e3),id:l.transaction,chain:e.netId,transaction:t.hash,from_address:l.from_address,from_price_eth:0,from_price_usd:0,from_symbol:a.fromToken.symbol,from_amount:Number(tn["utils"].formatUnits(a.fromTokenAmount||0,a.fromToken.decimals)),to_address:l.to_address,to_price_eth:0,to_price_usd:0,to_symbol:a.toToken.symbol,to_amount:Number(tn["utils"].formatUnits(a.toTokenAmount||0,a.toToken.decimals)),is_merged:0};e.initTxs.unshift(n)}return e.loadingConfirmSwap=!1,e.amount="",e.outAmount="",e.dialogVisibleSwap=!1,t.wait()})).then((function(t){return console.log("----transaction---",t),e.$notify({type:"success",message:e.$t("tradeSuccess")}),e.getTokenDetails(),e.getUserTokenList(),s&&Object(se["r"])(l).then((function(t){console.log("save---",t),1!==t.is_merged?setTimeout((function(){e.getUserAllTxs()}),3e3):e.getUserAllTxs()})),t})).catch((function(t){console.log("err--",t),e.dialogSwapSubmittedVisible=!1,s&&e.getUserAllTxs(),e.$f.handleError(t,"swap")})).finally((function(){e.loadingConfirmSwap=!1})),n.next=18;break;case 13:n.prev=13,n.t0=n["catch"](1),console.log("err--",n.t0),e.loadingConfirmSwap=!1,e.$f.handleError(n.t0,"swap");case 18:case"end":return n.stop()}}),n,null,[[1,13]])})))()},checkAmount:function(){if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return this.handleWalletAddress(),!0;var t,e,n=0,i=0;"sell"===this.tabActive?(n=this.amount,i=(null===(t=this.baseTokenChain)||void 0===t?void 0:t.balance)||0):(n=this.outAmount,i=(null===(e=this.activeToken)||void 0===e?void 0:e.balance)||0);return!(0===Number(i)||Number(i)<n||""===this.$store.state.wallet||"0"===String(n))},checkAmountMessage:function(){var t,e,n=0,i=0;"sell"===this.tabActive?(n=this.amount,i=(null===(t=this.baseTokenChain)||void 0===t?void 0:t.balance)||0):(n=this.outAmount,i=(null===(e=this.activeToken)||void 0===e?void 0:e.balance)||0);return Number(0===!i||Number(i)<n||""===this.$store.state.wallet)?this.$t("insufficientBalance"):"0"===String(n)?this.$t("AmountCannotBeZero"):void 0},getSwapTokensPrice:function(){var t,e,n,i,o,a,s,l,c=this;if(this.$store.getters.netId===(null===(t=this.$route.params)||void 0===t||null===(e=t.id)||void 0===e||null===(n=e.split)||void 0===n||null===(i=n.call(e,"-"))||void 0===i?void 0:i[1])){mn&&clearTimeout(mn);var r=this.$store.getters.netId||(null===(o=this.$route.params)||void 0===o||null===(a=o.id)||void 0===a||null===(s=a.split)||void 0===s||null===(l=s.call(a,"-"))||void 0===l?void 0:l[1])||"";Object(se["i"])(r).then((function(t){c.nativePrice=t})).finally((function(){mn=setTimeout(c.getSwapTokensPrice,3e4)}))}},getKlineHistory:function(t){var e,n,i,o,a=this;Object(se["g"])(t,"60",(null===(e=this.$route.params)||void 0===e||null===(n=e.id)||void 0===n||null===(i=n.split)||void 0===i||null===(o=i.call(n,"-"))||void 0===o?void 0:o[1])||"").then((function(t){var e,n=(null===t||void 0===t||null===(e=t.slice)||void 0===e?void 0:e.call(t,-10))||[];a.dataX=n.map((function(t){return t.time})),a.dataY=n.map((function(t){return t.close}))}))},goHistory:function(){this.$router.push({name:"SwapTxs"})},getUserAllTxs:function(){var t=this,e=this.$store.state.currentAccount;e&&(this.txsLoading=!0,Object(se["n"])().then((function(e){var n,i,o;null!==e&&void 0!==e&&null!==(n=e.some)&&void 0!==n&&n.call(e,(function(t){return 0===t.is_merged&&Date.now()-1e3*t.time<6e5}))&&setTimeout((function(){t.getUserAllTxs()}),1e4),t.initTxs=null===(i=(null===e||void 0===e?void 0:e.filter((function(t){return 1===t.is_merged||0===t.is_merged&&Date.now()-1e3*t.time<6e5})))||[])||void 0===i?void 0:i.map((function(t){return t.id?Object(it["a"])({},t):Object(it["a"])(Object(it["a"])({},t),{},{id:t.transaction})}));var a=[],s={};null===e||void 0===e||null===(o=e.forEach)||void 0===o||o.call(e,(function(t){s[t.from_address]||(a.push({address:t.from_address,symbol:t.from_symbol,chain:t.chain}),s[t.from_address]=!0),s[t.to_address]||(a.push({address:t.to_address,symbol:t.to_symbol,chain:t.chain}),s[t.to_address]=!0)})),t.txsTokens=a,localStorage.txsTokens=JSON.stringify(a||[])})).finally((function(){t.txsLoading=!1})))},alertTips:function(t,e){this.$dialog.alert({title:t,message:e,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"}).then((function(){}))},supportChain:function(){if("Swap"===this.$route.name){var t,e,n,i,o,a,s,l,c,r=this.$store.getters.netId||(null===(t=this.$route.params)||void 0===t||null===(e=t.id)||void 0===e||null===(n=e.split)||void 0===n||null===(i=n.call(e,"-"))||void 0===i?void 0:i[1])||"",u=["bsc"];if(r&&(null===u||void 0===u||null===(o=u.includes)||void 0===o||!o.call(u,r)))return this.$dialog.alert({title:"",message:this.$t("notYetSupportedChainTips",{chains:"BSC"}),confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"}).then((function(){})),!1;if((null===(a=this.$route.params)||void 0===a||null===(s=a.id)||void 0===s||null===(l=s.split)||void 0===l||null===(c=l.call(s,"-"))||void 0===c?void 0:c[1])!==this.$store.getters.netId&&this.$store.state.netId)return this.$dialog.alert({title:"",message:this.$t("chainNotSame"),confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"}).then((function(){})),!1}return!0},handleOutAmountMax:function(){var t,e,n=null===(t=this.activeToken)||void 0===t?void 0:t.balance;(null===(e=this.activeToken)||void 0===e?void 0:e.address)===le["e"]&&(n=new Ke.a(Math.floor((n-.005)*Math.pow(10,6))).div(Math.pow(10,6)).toFixed()),this.outAmount=n<0?0:n},getGasPrice:function(){var t,e,n,i,o=this,a=this.$store.getters.netId||(null===(t=this.$route.params)||void 0===t||null===(e=t.id)||void 0===e||null===(n=e.split)||void 0===n||null===(i=n.call(e,"-"))||void 0===i?void 0:i[1])||"";Object(se["f"])(a).then((function(t){o.gasPrice=t.toString()}))},beforeAmountChange:function(t){console.log("beforeAmountChange",t)},getPriceImpact:function(t){if(!Number(this.amount)&&!Number(this.outAmount))return new Ke.a(0);var e=t.routerPath,n=(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e[0]:null,i=(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e[e.length-1]:null;if(n&&i){var o=t.from_price,a=t.to_price,s=tn["utils"].formatUnits(n.amount,n.decimals),l=tn["utils"].formatUnits(i.amount,i.decimals);return new Ke.a(s).times(o).div(new Ke.a(l).times(a)).minus(1).abs().times(100)}return new Ke.a(0)},goAudit:function(){this.$f.openBrowser("https://beosin.com/audits/SwapFinder_202209021725.pdf")}}};n("64de");const fn=ct()(hn,[["render",tt],["__scopeId","data-v-a1c181ce"]]);e["default"]=fn},"377f":function(t,e,n){},"4e41":function(t,e,n){"use strict";n("7a7a")},"508c":function(t,e,n){"use strict";n("12fd")},"54e2":function(t,e,n){"use strict";n("9247")},"55be":function(t,e,n){"use strict";n("acba")},"57c9":function(t,e,n){"use strict";n("a9e3");var i=n("7a23"),o=n("afd7"),a=n.n(o),s={class:"tx-li-item_1"},l={style:{display:"flex","align-item":"center","justify-content":"left","min-width":"42%"}},c={style:{display:"flex","align-item":"center",flex:"1","justify-content":"center","overflow-x":"hidden"}},r={key:0,src:a.a,style:{width:"100%"},alt:"",srcset:""},u={key:1,class:"iconfont icon-jiantou2"},d={style:{display:"flex","align-item":"center","min-width":"42%","justify-content":"right"}},b={class:"tx-li-item_3"},v={key:0},m={key:1},p={key:2},h={key:3};function f(t,e,o,a,f,k){var j=Object(i["O"])("van-image");return Object(i["G"])(),Object(i["j"])("li",{class:"tx-li-item",style:Object(i["y"])({"--upColor":t.$store.getters.upColor[3],"--downColor":t.$store.getters.downColor[3]}),onClick:e[0]||(e[0]=Object(i["cb"])((function(){return k.goLink&&k.goLink.apply(k,arguments)}),["stop"]))},[Object(i["k"])("div",s,[Object(i["k"])("div",l,[Object(i["n"])(j,{round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem"},"lazy-load":"","show-loading":"",src:t.$f.formatIcon(o.item.from_address+"-"+o.item.chain),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(i["k"])("span",null,Object(i["T"])(t.$f.formatNumber2(o.item.from_amount))+" "+Object(i["T"])(o.item.from_symbol||""),1)]),Object(i["k"])("div",c,[0===o.item.is_merged?(Object(i["G"])(),Object(i["j"])("img",r)):(Object(i["G"])(),Object(i["j"])("i",u))]),Object(i["k"])("div",d,[Object(i["n"])(j,{round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem"},"lazy-load":"","show-loading":"",src:t.$f.formatIcon(o.item.to_address+"-"+o.item.chain),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(i["k"])("span",null,Object(i["T"])(t.$f.formatNumber2(o.item.to_amount))+" "+Object(i["T"])(o.item.to_symbol||""),1)])]),Object(i["k"])("ul",b,[Object(i["k"])("li",null,[1===o.item.is_merged?(Object(i["G"])(),Object(i["j"])("span",v,Object(i["T"])(t.$f.formatDate(o.item.time)),1)):(Object(i["G"])(),Object(i["j"])("span",m,"--")),1===o.item.is_merged?(Object(i["G"])(),Object(i["j"])("span",p,"$"+Object(i["T"])(t.$f.formatNumber2((Number(o.item.from_amount)||0)*(Number(o.item.from_price_usd)||0))),1)):(Object(i["G"])(),Object(i["j"])("span",h,"--"))])])],4)}var k={name:"TxItem",props:{item:Object},data:function(){return{}},methods:{goLink:function(){this.$f.openBrowser(this.$f.formatExplorerUrl(this.item.chain,this.item.transaction,"tx"))}}},j=(n("55be"),n("6b0d")),O=n.n(j);const g=O()(k,[["render",f],["__scopeId","data-v-221e2251"]]);e["a"]=g},"5a4a":function(t,e,n){},"64de":function(t,e,n){"use strict";n("7e16")},"7a7a":function(t,e,n){},"7e16":function(t,e,n){},9170:function(t,e,n){"use strict";n("5a4a")},9247:function(t,e,n){},"965b":function(t,e,n){t.exports=n.p+"static/img/audit-logo.01052351.png"},acba:function(t,e,n){},aecc:function(t,e,n){t.exports=n.p+"static/img/icon-default.75f6e9a0.png"},afd7:function(t,e,n){t.exports=n.p+"static/img/loading.fdd45987.svg"},c59b:function(t,e,n){},d398:function(t,e,n){"use strict";n("f94e")},e524:function(t,e,n){t.exports=n.p+"static/img/arrow-right.484eb652.svg"},e7b0:function(t,e,n){"use strict";n("377f")},f37e:function(t,e,n){"use strict";n("c59b")},f94e:function(t,e,n){}}]);